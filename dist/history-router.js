!function(t){var n={};function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="/",e(e.s=1)}([function(t,n){var e,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function c(t){if(e===setTimeout)return setTimeout(t,0);if((e===i||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:i}catch(t){e=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,s=[],f=!1,h=-1;function l(){f&&u&&(f=!1,u.length?s=u.concat(s):h=-1,s.length&&d())}function d(){if(!f){var t=c(l);f=!0;for(var n=s.length;n;){for(u=s,s=[];++h<n;)u&&u[h].run();h=-1,n=s.length}u=null,f=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(n){try{return r.call(null,t)}catch(n){return r.call(this,t)}}}(t)}}function p(t,n){this.fun=t,this.array=n}function v(){}o.nextTick=function(t){var n=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)n[e-1]=arguments[e];s.push(new p(t,n)),1!==s.length||f||c(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e(2),o=e(8),i=e.n(o);class a{constructor(t={}){this.options={hash:!t.hasOwnProperty("hash")||t.hash,history:t.hasOwnProperty("history")?t.history:{}},this.middlewares=new Array,this.routes=new Array,this.history=this.options.hash?Object(r.b)(this.options.history):Object(r.a)(this.options.history),this.history.block(t=>{let n=`${t.pathname}${t.search}${t.hash}`,e={to:t,from:this.history.location},r=!1;for(let o=0;o<this.routes.length;o++){let a=this.routes[o];if(i.a.test(this.options.hash?{path:`/#/${a.path}`,url:`/#/${n}`}:{path:a.path,url:n})){let o=(t,{from:n,to:e},r=null)=>{if(t.length){let o=t=>r=t instanceof Function?t():t;for(let i=0;i<t.length;i++)if(t[i]({to:e,from:n,next:o,response:r}),!r)return!1;return r}return!0};return(r=o(this.middlewares,e))&&a.middlewares.length&&(r=o(a.middlewares,e,r)),!!r&&a.callback({location:t,params:i.a.parse({path:n,definition:a.path,object:!0}),response:r})}}})}when(t,n,e=[]){return this.routes.push({path:t,callback:n,middlewares:e}),this}middleware(t){return this.middlewares.push(t),this}}window.HistoryRouter=a,n.default=a},function(t,n,e){"use strict";(function(t){e.d(n,"a",function(){return O}),e.d(n,"b",function(){return T});var r=e(3),o=e(4),i=e(5),a=e(6),c=e(7);function u(t){return"/"===t.charAt(0)?t:"/"+t}function s(t){return"/"===t.charAt(0)?t.substr(1):t}function f(t,n){return new RegExp("^"+n+"(\\/|\\?|#|$)","i").test(t)}function h(t,n){return f(t,n)?t.substr(n.length):t}function l(t){return"/"===t.charAt(t.length-1)?t.slice(0,-1):t}function d(t){var n=t.pathname,e=t.search,r=t.hash,o=n||"/";return e&&"?"!==e&&(o+="?"===e.charAt(0)?e:"?"+e),r&&"#"!==r&&(o+="#"===r.charAt(0)?r:"#"+r),o}function p(t,n,e,i){var a;"string"==typeof t?(a=function(t){var n=t||"/",e="",r="",o=n.indexOf("#");-1!==o&&(r=n.substr(o),n=n.substr(0,o));var i=n.indexOf("?");return-1!==i&&(e=n.substr(i),n=n.substr(0,i)),{pathname:n,search:"?"===e?"":e,hash:"#"===r?"":r}}(t)).state=n:(void 0===(a=Object(r.a)({},t)).pathname&&(a.pathname=""),a.search?"?"!==a.search.charAt(0)&&(a.search="?"+a.search):a.search="",a.hash?"#"!==a.hash.charAt(0)&&(a.hash="#"+a.hash):a.hash="",void 0!==n&&void 0===a.state&&(a.state=n));try{a.pathname=decodeURI(a.pathname)}catch(t){throw t instanceof URIError?new URIError('Pathname "'+a.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):t}return e&&(a.key=e),i?a.pathname?"/"!==a.pathname.charAt(0)&&(a.pathname=Object(o.a)(a.pathname,i.pathname)):a.pathname=i.pathname:a.pathname||(a.pathname="/"),a}function v(){var n=null;var e=[];return{setPrompt:function(e){return"production"!==t.env.NODE_ENV&&Object(a.a)(null==n,"A history supports only one prompt at a time"),n=e,function(){n===e&&(n=null)}},confirmTransitionTo:function(e,r,o,i){if(null!=n){var c="function"==typeof n?n(e,r):n;"string"==typeof c?"function"==typeof o?o(c,i):("production"!==t.env.NODE_ENV&&Object(a.a)(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),i(!0)):i(!1!==c)}else i(!0)},appendListener:function(t){var n=!0;function r(){n&&t.apply(void 0,arguments)}return e.push(r),function(){n=!1,e=e.filter(function(t){return t!==r})}},notifyListeners:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.forEach(function(t){return t.apply(void 0,n)})}}}var m=!("undefined"==typeof window||!window.document||!window.document.createElement);function y(t,n){n(window.confirm(t))}var w="popstate",g="hashchange";function b(){try{return window.history.state||{}}catch(t){return{}}}function O(n){void 0===n&&(n={}),m||("production"!==t.env.NODE_ENV?Object(c.a)(!1,"Browser history needs a DOM"):Object(c.a)(!1));var e=window.history,o=function(){var t=window.navigator.userAgent;return(-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),i=!(-1===window.navigator.userAgent.indexOf("Trident")),s=n,O=s.forceRefresh,E=void 0!==O&&O,P=s.getUserConfirmation,j=void 0===P?y:P,x=s.keyLength,T=void 0===x?6:x,A=n.basename?l(u(n.basename)):"";function k(n){var e=n||{},r=e.key,o=e.state,i=window.location,c=i.pathname+i.search+i.hash;return"production"!==t.env.NODE_ENV&&Object(a.a)(!A||f(c,A),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+c+'" to begin with "'+A+'".'),A&&(c=h(c,A)),p(c,o,r)}function N(){return Math.random().toString(36).substr(2,T)}var L=v();function _(t){Object(r.a)(B,t),B.length=e.length,L.notifyListeners(B.location,B.action)}function D(t){(function(t){void 0===t.state&&navigator.userAgent.indexOf("CriOS")})(t)||U(k(t.state))}function S(){U(k(b()))}var R=!1;function U(t){if(R)R=!1,_();else{L.confirmTransitionTo(t,"POP",j,function(n){n?_({action:"POP",location:t}):function(t){var n=B.location,e=H.indexOf(n.key);-1===e&&(e=0);var r=H.indexOf(t.key);-1===r&&(r=0);var o=e-r;o&&(R=!0,$(o))}(t)})}}var V=k(b()),H=[V.key];function C(t){return A+d(t)}function $(t){e.go(t)}var I=0;function q(t){1===(I+=t)&&1===t?(window.addEventListener(w,D),i&&window.addEventListener(g,S)):0===I&&(window.removeEventListener(w,D),i&&window.removeEventListener(g,S))}var M=!1;var B={length:e.length,action:"POP",location:V,createHref:C,push:function(n,r){"production"!==t.env.NODE_ENV&&Object(a.a)(!("object"==typeof n&&void 0!==n.state&&void 0!==r),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var i=p(n,r,N(),B.location);L.confirmTransitionTo(i,"PUSH",j,function(n){if(n){var r=C(i),c=i.key,u=i.state;if(o)if(e.pushState({key:c,state:u},null,r),E)window.location.href=r;else{var s=H.indexOf(B.location.key),f=H.slice(0,-1===s?0:s+1);f.push(i.key),H=f,_({action:"PUSH",location:i})}else"production"!==t.env.NODE_ENV&&Object(a.a)(void 0===u,"Browser history cannot push state in browsers that do not support HTML5 history"),window.location.href=r}})},replace:function(n,r){"production"!==t.env.NODE_ENV&&Object(a.a)(!("object"==typeof n&&void 0!==n.state&&void 0!==r),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var i=p(n,r,N(),B.location);L.confirmTransitionTo(i,"REPLACE",j,function(n){if(n){var r=C(i),c=i.key,u=i.state;if(o)if(e.replaceState({key:c,state:u},null,r),E)window.location.replace(r);else{var s=H.indexOf(B.location.key);-1!==s&&(H[s]=i.key),_({action:"REPLACE",location:i})}else"production"!==t.env.NODE_ENV&&Object(a.a)(void 0===u,"Browser history cannot replace state in browsers that do not support HTML5 history"),window.location.replace(r)}})},go:$,goBack:function(){$(-1)},goForward:function(){$(1)},block:function(t){void 0===t&&(t=!1);var n=L.setPrompt(t);return M||(q(1),M=!0),function(){return M&&(M=!1,q(-1)),n()}},listen:function(t){var n=L.appendListener(t);return q(1),function(){q(-1),n()}}};return B}var E="hashchange",P={hashbang:{encodePath:function(t){return"!"===t.charAt(0)?t:"!/"+s(t)},decodePath:function(t){return"!"===t.charAt(0)?t.substr(1):t}},noslash:{encodePath:s,decodePath:u},slash:{encodePath:u,decodePath:u}};function j(){var t=window.location.href,n=t.indexOf("#");return-1===n?"":t.substring(n+1)}function x(t){var n=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,n>=0?n:0)+"#"+t)}function T(n){void 0===n&&(n={}),m||("production"!==t.env.NODE_ENV?Object(c.a)(!1,"Hash history needs a DOM"):Object(c.a)(!1));var e=window.history,o=-1===window.navigator.userAgent.indexOf("Firefox"),s=n,w=s.getUserConfirmation,g=void 0===w?y:w,b=s.hashType,O=void 0===b?"slash":b,T=n.basename?l(u(n.basename)):"",A=P[O],k=A.encodePath,N=A.decodePath;function L(){var n=N(j());return"production"!==t.env.NODE_ENV&&Object(a.a)(!T||f(n,T),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+n+'" to begin with "'+T+'".'),T&&(n=h(n,T)),p(n)}var _=v();function D(t){Object(r.a)(F,t),F.length=e.length,_.notifyListeners(F.location,F.action)}var S=!1,R=null;function U(){var t=j(),n=k(t);if(t!==n)x(n);else{var e=L(),r=F.location;if(!S&&function(t,n){return t.pathname===n.pathname&&t.search===n.search&&t.hash===n.hash&&t.key===n.key&&Object(i.a)(t.state,n.state)}(r,e))return;if(R===d(e))return;R=null,function(t){if(S)S=!1,D();else{_.confirmTransitionTo(t,"POP",g,function(n){n?D({action:"POP",location:t}):function(t){var n=F.location,e=$.lastIndexOf(d(n));-1===e&&(e=0);var r=$.lastIndexOf(d(t));-1===r&&(r=0);var o=e-r;o&&(S=!0,I(o))}(t)})}}(e)}}var V=j(),H=k(V);V!==H&&x(H);var C=L(),$=[d(C)];function I(n){"production"!==t.env.NODE_ENV&&Object(a.a)(o,"Hash history go(n) causes a full page reload in this browser"),e.go(n)}var q=0;function M(t){1===(q+=t)&&1===t?window.addEventListener(E,U):0===q&&window.removeEventListener(E,U)}var B=!1;var F={length:e.length,action:"POP",location:C,createHref:function(t){return"#"+k(T+d(t))},push:function(n,e){"production"!==t.env.NODE_ENV&&Object(a.a)(void 0===e,"Hash history cannot push state; it is ignored");var r=p(n,void 0,void 0,F.location);_.confirmTransitionTo(r,"PUSH",g,function(n){if(n){var e=d(r),o=k(T+e);if(j()!==o){R=e,function(t){window.location.hash=t}(o);var i=$.lastIndexOf(d(F.location)),c=$.slice(0,-1===i?0:i+1);c.push(e),$=c,D({action:"PUSH",location:r})}else"production"!==t.env.NODE_ENV&&Object(a.a)(!1,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack"),D()}})},replace:function(n,e){"production"!==t.env.NODE_ENV&&Object(a.a)(void 0===e,"Hash history cannot replace state; it is ignored");var r=p(n,void 0,void 0,F.location);_.confirmTransitionTo(r,"REPLACE",g,function(t){if(t){var n=d(r),e=k(T+n);j()!==e&&(R=n,x(e));var o=$.indexOf(d(F.location));-1!==o&&($[o]=n),D({action:"REPLACE",location:r})}})},go:I,goBack:function(){I(-1)},goForward:function(){I(1)},block:function(t){void 0===t&&(t=!1);var n=_.setPrompt(t);return B||(M(1),B=!0),function(){return B&&(B=!1,M(-1)),n()}},listen:function(t){var n=_.appendListener(t);return M(1),function(){M(-1),n()}}};return F}}).call(n,e(0))},function(t,n,e){"use strict";function r(){return(r=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t}).apply(this,arguments)}n.a=r},function(t,n,e){"use strict";function r(t){return"/"===t.charAt(0)}function o(t,n){for(var e=n,r=e+1,o=t.length;r<o;e+=1,r+=1)t[e]=t[r];t.pop()}n.a=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e=t&&t.split("/")||[],i=n&&n.split("/")||[],a=t&&r(t),c=n&&r(n),u=a||c;if(t&&r(t)?i=e:e.length&&(i.pop(),i=i.concat(e)),!i.length)return"/";var s=void 0;if(i.length){var f=i[i.length-1];s="."===f||".."===f||""===f}else s=!1;for(var h=0,l=i.length;l>=0;l--){var d=i[l];"."===d?o(i,l):".."===d?(o(i,l),h++):h&&(o(i,l),h--)}if(!u)for(;h--;h)i.unshift("..");!u||""===i[0]||i[0]&&r(i[0])||i.unshift("");var p=i.join("/");return s&&"/"!==p.substr(-1)&&(p+="/"),p}},function(t,n,e){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};n.a=function t(n,e){if(n===e)return!0;if(null==n||null==e)return!1;if(Array.isArray(n))return Array.isArray(e)&&n.length===e.length&&n.every(function(n,r){return t(n,e[r])});var o=void 0===n?"undefined":r(n);if(o!==(void 0===e?"undefined":r(e)))return!1;if("object"===o){var i=n.valueOf(),a=e.valueOf();if(i!==n||a!==e)return t(i,a);var c=Object.keys(n),u=Object.keys(e);return c.length===u.length&&c.every(function(r){return t(n[r],e[r])})}return!1}},function(t,n,e){"use strict";(function(t){var e="production"===t.env.NODE_ENV;n.a=function(t,n){if(!e){if(t)return;var r="Warning: "+n;"undefined"!=typeof console&&console.warn(r);try{throw Error(r)}catch(t){}}}}).call(n,e(0))},function(t,n,e){"use strict";(function(t){var e="production"===t.env.NODE_ENV,r="Invariant failed";n.a=function(t,n){if(!t)throw e?new Error(r):new Error(r+": "+(n||""))}}).call(n,e(0))},function(t,n,e){!function(n,e){t.exports=e()}(0,function(){"use strict";var t=/\/$/,n=/^\//,e=/[()]/g,r=/\((.*?)\)/g,o=/\*\w+/g,i=/(\(\?)?:\w+/,a=/(\(\?)?:\w+/g,c=/[-{}[\]+?.,\\^$|#\s]/g;function u(t){return"[object Array]"===Object.prototype.toString.call(t)}function s(t,n){return t=t||"",function(t){if(null==t)return!0;if(t.length>0)return!1;if(0===t.length)return!0;if("object"!=typeof t)return!0;for(var n in t)if(hasOwnProperty.call(t,n))return!1;return!0}(n=n||[])?function(t){return t.replace(r,"")}(t):f(function(t){return t.replace(e,"")}(t=function(t,n){if(!u(n=n||[])){var e=t.match(a);e&&(n=e.map(function(t){return n[t.substr(1)]}))}u(n)&&n.forEach(function(n){n&&(t=function(t,n){var e=-1!==t.indexOf(":");if(n=encodeURIComponent(n),e)return t.replace(i,n);return t.replace(o,n)}(t,n))});var c=t.match(r);c&&c.forEach(function(n){(function(t){return i.test(t)||o.test(t)})(n)&&(t=t.replace(n,""))});return t}(t,n)))}function f(n){return n.replace(t,"")}function h(t){var e=t.host,r=t.path,o=t.query,i=t.hash;e=f(e);var a=r.split("?"),c=a[0],u=a[1];return r=(r=f(function(t){return t.replace(n,"")}(c)))?"/"+r:"",u=u?u+"&":"",""+e+r+(o=o?"?"+u+o:"")+(i=i?"#"+i:"")}function l(t,n){for(var e=[],r=0;r<t.length;r++){var o=t[r];o[n]&&""===o.value&&e.push(o)}return e}function d(t){return{named:t&&t.match(a)||[],splat:t&&t.match(o)||[]}}function p(t){return t=t.replace(c,"\\$&").replace(r,"(?:$1)?").replace(a,function(t,n){return n?t:"([^/?]+)"}).replace(o,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")}function v(t){return s((t=t||{}).path,t.params)}function m(t){var n=[];for(var e in(t=t||{}).query){var r=t.query[e];n.push(e+"="+encodeURIComponent(r))}return n.length?n.join("&"):""}function y(t,n){var e={},r=d(t),o=0;return r.named.forEach(i),r.splat.forEach(i),e;function i(t){e[t.slice(1)]=n[o++]}}return{build:function(t){(t=t||{}).host=t.host||"";var n=v(t),e=m(t);return h({host:t.host,path:n,query:e,hash:t.hash})},test:function(t){return p((t=t||{}).path).test(t.url)},stats:function(t,n){var e=t.match(r)||[],o=d(t),i=o.named,a=o.splat,c=i.concat(a);return u(n=n||{})&&(n=y(t,n)),{params:c=c.map(function(t){for(var r=!1,o=0;o<e.length;o++)if(-1!==e[o].indexOf(t)){r=!0;break}return{name:t,value:n[t.slice(1)]||"",optional:r,required:!r}}),hasOptionalParams:r.test(t),missingOptionalParams:l(c,"optional"),missingRequiredParams:l(c,"required"),missingParams:l(c,"name")}},parse:function(t){void 0===t&&(t={});var n=t.path,e=t.definition,r=t.object;if(!n&&!e)throw new Error("url-composer: Missing path and definition");var o=p(e).exec(n);if(!o)return null;var i=(o=o.slice(1)).map(function(t,n){return n===o.length-1?t||null:t?decodeURIComponent(t):null});if(r){var a=i.pop();(i=y(e,i)).query=a}return i},params:y,path:v,query:m,regex:p,match:d}})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgNGIyODgwNzAyM2RkYjE4MWUwMmYiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3Byb2Nlc3MvYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vLi9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvaGlzdG9yeS9lc20vaGlzdG9yeS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZXh0ZW5kcy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcmVzb2x2ZS1wYXRobmFtZS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdmFsdWUtZXF1YWwvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3Rpbnktd2FybmluZy9kaXN0L3Rpbnktd2FybmluZy5lc20uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3RpbnktaW52YXJpYW50L2Rpc3QvdGlueS1pbnZhcmlhbnQuZXNtLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy91cmwtY29tcG9zZXIvZGlzdC91cmwtY29tcG9zZXIuanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJnZXQiLCJuIiwiX19lc01vZHVsZSIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImNhY2hlZFNldFRpbWVvdXQiLCJjYWNoZWRDbGVhclRpbWVvdXQiLCJwcm9jZXNzIiwiZGVmYXVsdFNldFRpbW91dCIsIkVycm9yIiwiZGVmYXVsdENsZWFyVGltZW91dCIsInJ1blRpbWVvdXQiLCJmdW4iLCJzZXRUaW1lb3V0IiwiZSIsInRoaXMiLCJjbGVhclRpbWVvdXQiLCJjdXJyZW50UXVldWUiLCJxdWV1ZSIsImRyYWluaW5nIiwicXVldWVJbmRleCIsImNsZWFuVXBOZXh0VGljayIsImxlbmd0aCIsImNvbmNhdCIsImRyYWluUXVldWUiLCJ0aW1lb3V0IiwibGVuIiwicnVuIiwibWFya2VyIiwicnVuQ2xlYXJUaW1lb3V0IiwiSXRlbSIsImFycmF5Iiwibm9vcCIsIm5leHRUaWNrIiwiYXJncyIsIkFycmF5IiwiYXJndW1lbnRzIiwicHVzaCIsImFwcGx5IiwidGl0bGUiLCJicm93c2VyIiwiZW52IiwiYXJndiIsInZlcnNpb24iLCJ2ZXJzaW9ucyIsIm9uIiwiYWRkTGlzdGVuZXIiLCJvbmNlIiwib2ZmIiwicmVtb3ZlTGlzdGVuZXIiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJlbWl0IiwicHJlcGVuZExpc3RlbmVyIiwicHJlcGVuZE9uY2VMaXN0ZW5lciIsImxpc3RlbmVycyIsImJpbmRpbmciLCJjd2QiLCJjaGRpciIsImRpciIsInVtYXNrIiwiX193ZWJwYWNrX2V4cG9ydHNfXyIsInZhbHVlIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX2hpc3RvcnlfXyIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV91cmxfY29tcG9zZXJfXyIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV91cmxfY29tcG9zZXJfX19kZWZhdWx0IiwiSGlzdG9yeVJvdXRlciIsIltvYmplY3QgT2JqZWN0XSIsIm9wdGlvbnMiLCJoYXNoIiwiaGlzdG9yeSIsIm1pZGRsZXdhcmVzIiwicm91dGVzIiwiYmxvY2siLCJsb2NhdGlvbiIsInBhdGgiLCJwYXRobmFtZSIsInNlYXJjaCIsIndoZXJlIiwidG8iLCJmcm9tIiwicmVzcG9uc2UiLCJyb3V0ZSIsImEiLCJ0ZXN0IiwidXJsIiwibWlkZGxld2FyZSIsIm5leHQiLCJkYXRhIiwiRnVuY3Rpb24iLCJjYWxsYmFjayIsInBhcmFtcyIsInBhcnNlIiwiZGVmaW5pdGlvbiIsIndpbmRvdyIsImNyZWF0ZUJyb3dzZXJIaXN0b3J5IiwiY3JlYXRlSGFzaEhpc3RvcnkiLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX2JhYmVsX3J1bnRpbWVfaGVscGVyc19lc21fZXh0ZW5kc19fIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX3Jlc29sdmVfcGF0aG5hbWVfXyIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl92YWx1ZV9lcXVhbF9fIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX3Rpbnlfd2FybmluZ19fIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X3RpbnlfaW52YXJpYW50X18iLCJhZGRMZWFkaW5nU2xhc2giLCJjaGFyQXQiLCJzdHJpcExlYWRpbmdTbGFzaCIsInN1YnN0ciIsImhhc0Jhc2VuYW1lIiwicHJlZml4IiwiUmVnRXhwIiwic3RyaXBCYXNlbmFtZSIsInN0cmlwVHJhaWxpbmdTbGFzaCIsInNsaWNlIiwiY3JlYXRlUGF0aCIsImNyZWF0ZUxvY2F0aW9uIiwic3RhdGUiLCJrZXkiLCJjdXJyZW50TG9jYXRpb24iLCJoYXNoSW5kZXgiLCJpbmRleE9mIiwic2VhcmNoSW5kZXgiLCJwYXJzZVBhdGgiLCJ1bmRlZmluZWQiLCJkZWNvZGVVUkkiLCJVUklFcnJvciIsImNyZWF0ZVRyYW5zaXRpb25NYW5hZ2VyIiwicHJvbXB0Iiwic2V0UHJvbXB0IiwibmV4dFByb21wdCIsIk5PREVfRU5WIiwiY29uZmlybVRyYW5zaXRpb25UbyIsImFjdGlvbiIsImdldFVzZXJDb25maXJtYXRpb24iLCJyZXN1bHQiLCJhcHBlbmRMaXN0ZW5lciIsImZuIiwiaXNBY3RpdmUiLCJsaXN0ZW5lciIsImZpbHRlciIsIml0ZW0iLCJub3RpZnlMaXN0ZW5lcnMiLCJfbGVuIiwiX2tleSIsImZvckVhY2giLCJjYW5Vc2VET00iLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJnZXRDb25maXJtYXRpb24iLCJtZXNzYWdlIiwiY29uZmlybSIsIlBvcFN0YXRlRXZlbnQiLCJIYXNoQ2hhbmdlRXZlbnQiLCJnZXRIaXN0b3J5U3RhdGUiLCJwcm9wcyIsImdsb2JhbEhpc3RvcnkiLCJjYW5Vc2VIaXN0b3J5IiwidWEiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJzdXBwb3J0c0hpc3RvcnkiLCJuZWVkc0hhc2hDaGFuZ2VMaXN0ZW5lciIsIl9wcm9wcyIsIl9wcm9wcyRmb3JjZVJlZnJlc2giLCJmb3JjZVJlZnJlc2giLCJfcHJvcHMkZ2V0VXNlckNvbmZpcm0iLCJfcHJvcHMka2V5TGVuZ3RoIiwia2V5TGVuZ3RoIiwiYmFzZW5hbWUiLCJnZXRET01Mb2NhdGlvbiIsImhpc3RvcnlTdGF0ZSIsIl9yZWYiLCJfd2luZG93JGxvY2F0aW9uIiwiY3JlYXRlS2V5IiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwidHJhbnNpdGlvbk1hbmFnZXIiLCJzZXRTdGF0ZSIsIm5leHRTdGF0ZSIsImhhbmRsZVBvcFN0YXRlIiwiZXZlbnQiLCJpc0V4dHJhbmVvdXNQb3BzdGF0ZUV2ZW50IiwiaGFuZGxlUG9wIiwiaGFuZGxlSGFzaENoYW5nZSIsImZvcmNlTmV4dFBvcCIsIm9rIiwiZnJvbUxvY2F0aW9uIiwidG9Mb2NhdGlvbiIsInRvSW5kZXgiLCJhbGxLZXlzIiwiZnJvbUluZGV4IiwiZGVsdGEiLCJnbyIsInJldmVydFBvcCIsImluaXRpYWxMb2NhdGlvbiIsImNyZWF0ZUhyZWYiLCJsaXN0ZW5lckNvdW50IiwiY2hlY2tET01MaXN0ZW5lcnMiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImlzQmxvY2tlZCIsImhyZWYiLCJwdXNoU3RhdGUiLCJwcmV2SW5kZXgiLCJuZXh0S2V5cyIsInJlcGxhY2UiLCJyZXBsYWNlU3RhdGUiLCJnb0JhY2siLCJnb0ZvcndhcmQiLCJ1bmJsb2NrIiwibGlzdGVuIiwidW5saXN0ZW4iLCJIYXNoQ2hhbmdlRXZlbnQkMSIsIkhhc2hQYXRoQ29kZXJzIiwiaGFzaGJhbmciLCJlbmNvZGVQYXRoIiwiZGVjb2RlUGF0aCIsIm5vc2xhc2giLCJzbGFzaCIsImdldEhhc2hQYXRoIiwic3Vic3RyaW5nIiwicmVwbGFjZUhhc2hQYXRoIiwiY2FuR29XaXRob3V0UmVsb2FkIiwiX3Byb3BzJGhhc2hUeXBlIiwiaGFzaFR5cGUiLCJfSGFzaFBhdGhDb2RlcnMkaGFzaFQiLCJpZ25vcmVQYXRoIiwiZW5jb2RlZFBhdGgiLCJwcmV2TG9jYXRpb24iLCJiIiwibG9jYXRpb25zQXJlRXF1YWwiLCJhbGxQYXRocyIsImxhc3RJbmRleE9mIiwicHVzaEhhc2hQYXRoIiwibmV4dFBhdGhzIiwiX2V4dGVuZHMiLCJhc3NpZ24iLCJ0YXJnZXQiLCJzb3VyY2UiLCJpc0Fic29sdXRlIiwic3BsaWNlT25lIiwibGlzdCIsImluZGV4IiwiayIsInBvcCIsInRvUGFydHMiLCJzcGxpdCIsImZyb21QYXJ0cyIsImlzVG9BYnMiLCJpc0Zyb21BYnMiLCJtdXN0RW5kQWJzIiwiaGFzVHJhaWxpbmdTbGFzaCIsImxhc3QiLCJ1cCIsInBhcnQiLCJ1bnNoaWZ0Iiwiam9pbiIsIl90eXBlb2YiLCJTeW1ib2wiLCJpdGVyYXRvciIsIm9iaiIsImNvbnN0cnVjdG9yIiwidmFsdWVFcXVhbCIsImlzQXJyYXkiLCJldmVyeSIsImFUeXBlIiwiYVZhbHVlIiwidmFsdWVPZiIsImJWYWx1ZSIsImFLZXlzIiwia2V5cyIsImJLZXlzIiwiaXNQcm9kdWN0aW9uIiwiY29uZGl0aW9uIiwidGV4dCIsImNvbnNvbGUiLCJ3YXJuIiwieCIsImdsb2JhbCIsImZhY3RvcnkiLCJUUkFJTElOR19TTEFTSCIsIkxFQURJTkdfU0xBU0giLCJQQVJFTlRIRVNFUyIsIk9QVElPTkFMX1BBUkFNUyIsIlNQTEFUX1BBUkFNUyIsIk5BTUVEX1BBUkFNIiwiTkFNRURfUEFSQU1TIiwiRVNDQVBFIiwiY29tcG9zZVBhdGgiLCJpc0VtcHR5IiwicmVtb3ZlT3B0aW9uYWxQYXJhbXMiLCJyZW1vdmVUcmFpbGluZ1NsYXNoIiwicmVtb3ZlUGFyZW50aGVzZXMiLCJwYXJhbU5hbWVzIiwibWF0Y2giLCJtYXAiLCJhcmciLCJoYXNOYW1lZFBhcmFtIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwicmVwbGFjZUFyZyIsIm1hdGNoZXMiLCJwYXJhbSIsImlzTmFtZWRPclNwbGF0UGFyYW0iLCJyZXBsYWNlQXJncyIsInNtYXJ0Q29uY2F0IiwicmVmIiwiaG9zdCIsInF1ZXJ5IiwicmVmJDEiLCJwYXRoUGFydCIsInF1ZXJ5UGFydCIsInJlbW92ZUxlYWRpbmdTbGFzaCIsInRlc3RQYXJhbWV0ZXIiLCJmaWVsZCIsImdldFBhcmFtc01hdGNoIiwibmFtZWQiLCJzcGxhdCIsInJvdXRlVG9SZWdleCIsIm9wdGlvbmFsIiwiYnVpbGRQYXRoIiwiYnVpbGRRdWVyeSIsInBhcmFtc0FycmF5Mk9iamVjdCIsImNvbXBvc2UiLCJidWlsZCIsInN0YXRzIiwiaXNPcHRpb25hbCIsInJlcXVpcmVkIiwiaGFzT3B0aW9uYWxQYXJhbXMiLCJtaXNzaW5nT3B0aW9uYWxQYXJhbXMiLCJtaXNzaW5nUmVxdWlyZWRQYXJhbXMiLCJtaXNzaW5nUGFyYW1zIiwiZXhlYyIsImRlY29kZVVSSUNvbXBvbmVudCIsInJlZ2V4Il0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLElBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsWUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcs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QUF4QyxLQXVCQXdELE9BcEJBQSxJQUFBMk0sSUFBQSxTQUFBTSxHQUdBLElBRkEsSUFBQXdCLEdBQUEsRUFFQXJWLEVBQUEsRUFBbUJBLEVBQUE4VSxFQUFBdFMsT0FBcUJ4QyxJQUV4QyxRQURBOFUsRUFBQTlVLEdBQ0F1SSxRQUFBc0wsR0FBQSxDQUNBd0IsR0FBQSxFQUNBLE1BSUEsT0FDQTlVLEtBQUFzVCxFQUNBOU8sTUFBQTNCLEVBQUF5USxFQUFBN0wsTUFBQSxRQUNBOE0sU0FBQU8sRUFDQUMsVUFBQUQsS0FNQUUsa0JBQUE1QyxFQUFBdE0sS0FBQVQsR0FDQTRQLHNCQUFBaEIsRUFBQTVOLEVBQUEsWUFDQTZPLHNCQUFBakIsRUFBQTVOLEVBQUEsWUFDQThPLGNBQUFsQixFQUFBNU4sRUFBQSxVQXFEQUMsTUFyQ0EsU0FBQXhCLFFBQ0EsSUFBQUEsVUFFQSxJQUFBTyxFQUFBUCxFQUFBTyxLQUNBa0IsRUFBQXpCLEVBQUF5QixXQUNBN0YsRUFBQW9FLEVBQUFwRSxPQUVBLElBQUEyRSxJQUFBa0IsRUFDQSxVQUFBbkYsTUFBQSw2Q0FHQSxJQUVBaUYsRUFGQWlPLEVBQUEvTixHQUVBNk8sS0FBQS9QLEdBRUEsSUFBQWdCLEVBQWdCLFlBSWhCLElBQUF5QyxHQUZBekMsSUFBQW9CLE1BQUEsSUFFQXVMLElBQUEsU0FBQU0sRUFBQTdULEdBQ0EsT0FBQUEsSUFBQTRHLEVBQUFwRSxPQUFBLEVBQWtDcVIsR0FBQSxLQUNsQ0EsRUFBQStCLG1CQUFBL0IsR0FBQSxPQUdBLEdBQUE1UyxFQUFBLENBQ0EsSUFBQWtULEVBQUE5SyxFQUFBK0csT0FDQS9HLEVBQUE0TCxFQUFBbk8sRUFBQXVDLElBQ0E4SyxRQUdBLE9BQUE5SyxHQVFBekMsT0FBQXFPLEVBQ0FyUCxLQUFBbVAsRUFDQVosTUFBQWEsRUFDQWEsTUFBQWhCLEVBQ0F2QixNQUFBb0IiLCJmaWxlIjoiZGlzdC9oaXN0b3J5LXJvdXRlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIi9cIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCA0YjI4ODA3MDIzZGRiMTgxZTAyZiIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgfVxufSAoKSlcbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZE9uY2VMaXN0ZW5lciA9IG5vb3A7XG5cbnByb2Nlc3MubGlzdGVuZXJzID0gZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIFtdIH1cblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9wcm9jZXNzL2Jyb3dzZXIuanNcbi8vIG1vZHVsZSBpZCA9IDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiaW1wb3J0IHsgY3JlYXRlSGFzaEhpc3RvcnksIGNyZWF0ZUJyb3dzZXJIaXN0b3J5IH0gZnJvbSAnaGlzdG9yeSc7XG5pbXBvcnQgdXJsIGZyb20gJ3VybC1jb21wb3Nlcic7XG5cbmNsYXNzIEhpc3RvcnlSb3V0ZXIge1xuXHQvKipcblx0ICogQ3JlYXRlIHRoaXMgSW5zdGFuY2Vcblx0ICogXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqL1xuXHQgY29uc3RydWN0b3Iob3B0aW9ucyA9IHt9KSB7XG4gICAgIFxuXHRcdC8qKiBEZWZhdWx0ICovXG5cdFx0dGhpcy5vcHRpb25zID0ge1xuXHRcdFx0aGFzaDogb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnaGFzaCcpXG5cdFx0XHRcdD8gb3B0aW9ucy5oYXNoXG5cdFx0XHRcdDogdHJ1ZSxcblx0XHRcdGhpc3Rvcnk6IG9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ2hpc3RvcnknKVxuXHRcdFx0XHQ/IG9wdGlvbnMuaGlzdG9yeVxuXHRcdFx0XHQ6IHt9XG5cdFx0fTtcblxuXHRcdC8qKiBHbG9iYWwgbWlkZGxld2FyZXMgKi9cblx0XHR0aGlzLm1pZGRsZXdhcmVzID0gbmV3IEFycmF5KCk7IFxuXG5cdFx0LyoqIFJlZ2lzdGVyZWQgcm91dGVzICovXG5cdFx0dGhpcy5yb3V0ZXMgPSBuZXcgQXJyYXkoKTsgXG5cblx0XHQvKiogSGlzdG9yeSAqL1xuXHRcdHRoaXMuaGlzdG9yeSA9IHRoaXMub3B0aW9ucy5oYXNoXG5cdFx0XHQ/IGNyZWF0ZUhhc2hIaXN0b3J5KHRoaXMub3B0aW9ucy5oaXN0b3J5KVxuXHRcdFx0OiBjcmVhdGVCcm93c2VySGlzdG9yeSh0aGlzLm9wdGlvbnMuaGlzdG9yeSlcbiAgICA7XG4gICAgXG4gICAgLyoqIEJsb2NraW5nICovXG4gICAgdGhpcy5oaXN0b3J5LmJsb2NrKGxvY2F0aW9uID0+IHtcbiAgICAgIC8qKiBJbml0aWFsaXplICovXG4gICAgICBsZXQgcGF0aCA9IGAke2xvY2F0aW9uLnBhdGhuYW1lfSR7bG9jYXRpb24uc2VhcmNofSR7bG9jYXRpb24uaGFzaH1gLFxuICAgICAgICAgIHdoZXJlID0geyBcbiAgICAgICAgICAgIHRvOiBsb2NhdGlvbiwgXG4gICAgICAgICAgICBmcm9tOiB0aGlzLmhpc3RvcnkubG9jYXRpb24gXG4gICAgICAgICAgfSxcbiAgICAgICAgICByZXNwb25zZSA9IGZhbHNlXG4gICAgICA7XG4gICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5yb3V0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLyoqIEN1cnJlbnQgUm91dGUgKi9cbiAgICAgICAgbGV0IHJvdXRlID0gdGhpcy5yb3V0ZXNbaV0sXG4gICAgICAgICAgICBpc0NvcnJlY3RVcmwgPSB1cmwudGVzdCh0aGlzLm9wdGlvbnMuaGFzaCBcbiAgICAgICAgICAgICAgPyB7IHBhdGg6IGAvIy8ke3JvdXRlLnBhdGh9YCwgdXJsOiBgLyMvJHtwYXRofWAgfVxuICAgICAgICAgICAgICA6IHsgcGF0aDogcm91dGUucGF0aCwgdXJsOiBwYXRoIH1cbiAgICAgICAgICAgIClcbiAgICAgICAgO1xuICAgICAgICBpZihpc0NvcnJlY3RVcmwpIHtcbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBSdW4gbWlkZGxld2FyZXNcbiAgICAgICAgICAgKiBcbiAgICAgICAgICAgKiBAcGFyYW0ge0FycmF5fSBtaWRkbGV3YXJlcyBcbiAgICAgICAgICAgKi9cbiAgICAgICAgICBsZXQgbWlkZGxld2FyZSA9IChtaWRkbGV3YXJlcywgeyBmcm9tLCB0byB9LCByZXNwb25zZSA9IG51bGwpID0+IHtcbiAgICAgICAgICAgIC8qKiBhc3NlcnQgTWlkZGxld2FyZSAqL1xuICAgICAgICAgICAgaWYobWlkZGxld2FyZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIGxldCBuZXh0ID0gZGF0YSA9PiByZXNwb25zZSA9IGRhdGEgaW5zdGFuY2VvZiBGdW5jdGlvbj8gZGF0YSgpOiBkYXRhO1xuICAgICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgbWlkZGxld2FyZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBtaWRkbGV3YXJlc1tpXSh7IHRvLCBmcm9tLCBuZXh0LCByZXNwb25zZSB9KTtcbiAgICAgICAgICAgICAgICBpZighcmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLyoqIFBhc3NlZCBhbGwgbWlkZGxld2FyZXMgKi9cbiAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLyoqIE1pZGxld2FyZXMgYXJlIGVtcHR5ICovXG4gICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgICAgLyoqIEdsb2JhbCBtaWRkbGV3YXJlcyAqL1xuICAgICAgICAgIGlmKHJlc3BvbnNlID0gbWlkZGxld2FyZSh0aGlzLm1pZGRsZXdhcmVzLCB3aGVyZSkpIHtcbiAgICAgICAgICAgIC8qKiBSb3V0ZSBtaWRkbGV3YXJlcyAqL1xuICAgICAgICAgICAgaWYocm91dGUubWlkZGxld2FyZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIHJlc3BvbnNlID0gbWlkZGxld2FyZShyb3V0ZS5taWRkbGV3YXJlcywgd2hlcmUsIHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHJldHVybiByb3V0ZS5jYWxsYmFjayh7XG4gICAgICAgICAgICAgIGxvY2F0aW9uLCBcbiAgICAgICAgICAgICAgcGFyYW1zOiB1cmwucGFyc2UoeyBwYXRoLCBkZWZpbml0aW9uOiByb3V0ZS5wYXRoLCBvYmplY3Q6IHRydWUgfSksIFxuICAgICAgICAgICAgICByZXNwb25zZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSk7XG5cdH1cblxuXHQvKipcblx0ICogUmVnaXN0ZXIgUm91dGVcblx0ICogXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoIFxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBcblx0ICogQHBhcmFtIHtBcnJheX0gbWlkZGxld2FyZXMgXG5cdCAqL1xuXHR3aGVuKHBhdGgsIGNhbGxiYWNrLCBtaWRkbGV3YXJlcyA9IFtdKSB7XG5cdFx0LyoqIFJvdXRlICovXG5cdFx0dGhpcy5yb3V0ZXMucHVzaCh7IHBhdGgsIGNhbGxiYWNrLCBtaWRkbGV3YXJlcyB9KTtcblx0XHRyZXR1cm4gdGhpcztcblx0fVxuXG5cdC8qKlxuXHQgKiBSZWdpc3RlciBnbG9iYWwgbWlkZGxld2FyZVxuXHQgKiBcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgXG5cdCAqL1xuXHRtaWRkbGV3YXJlKGNhbGxiYWNrKSB7XG5cdFx0LyoqIEdsb2JhbCBtaWRkbGV3YXJlICovXG5cdFx0dGhpcy5taWRkbGV3YXJlcy5wdXNoKGNhbGxiYWNrKTtcblx0XHRyZXR1cm4gdGhpcztcblx0fVxufVxuXG4vKiogT25seSBmb3IgQ0ROLCBvciBCb3dlciAqL1xud2luZG93Lkhpc3RvcnlSb3V0ZXIgPSBIaXN0b3J5Um91dGVyO1xuXG5leHBvcnQgZGVmYXVsdCBIaXN0b3J5Um91dGVyO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiaW1wb3J0IF9leHRlbmRzIGZyb20gJ0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2V4dGVuZHMnO1xuaW1wb3J0IHJlc29sdmVQYXRobmFtZSBmcm9tICdyZXNvbHZlLXBhdGhuYW1lJztcbmltcG9ydCB2YWx1ZUVxdWFsIGZyb20gJ3ZhbHVlLWVxdWFsJztcbmltcG9ydCB3YXJuaW5nIGZyb20gJ3Rpbnktd2FybmluZyc7XG5pbXBvcnQgaW52YXJpYW50IGZyb20gJ3RpbnktaW52YXJpYW50JztcblxuZnVuY3Rpb24gYWRkTGVhZGluZ1NsYXNoKHBhdGgpIHtcbiAgcmV0dXJuIHBhdGguY2hhckF0KDApID09PSAnLycgPyBwYXRoIDogJy8nICsgcGF0aDtcbn1cbmZ1bmN0aW9uIHN0cmlwTGVhZGluZ1NsYXNoKHBhdGgpIHtcbiAgcmV0dXJuIHBhdGguY2hhckF0KDApID09PSAnLycgPyBwYXRoLnN1YnN0cigxKSA6IHBhdGg7XG59XG5mdW5jdGlvbiBoYXNCYXNlbmFtZShwYXRoLCBwcmVmaXgpIHtcbiAgcmV0dXJuIG5ldyBSZWdFeHAoJ14nICsgcHJlZml4ICsgJyhcXFxcL3xcXFxcP3wjfCQpJywgJ2knKS50ZXN0KHBhdGgpO1xufVxuZnVuY3Rpb24gc3RyaXBCYXNlbmFtZShwYXRoLCBwcmVmaXgpIHtcbiAgcmV0dXJuIGhhc0Jhc2VuYW1lKHBhdGgsIHByZWZpeCkgPyBwYXRoLnN1YnN0cihwcmVmaXgubGVuZ3RoKSA6IHBhdGg7XG59XG5mdW5jdGlvbiBzdHJpcFRyYWlsaW5nU2xhc2gocGF0aCkge1xuICByZXR1cm4gcGF0aC5jaGFyQXQocGF0aC5sZW5ndGggLSAxKSA9PT0gJy8nID8gcGF0aC5zbGljZSgwLCAtMSkgOiBwYXRoO1xufVxuZnVuY3Rpb24gcGFyc2VQYXRoKHBhdGgpIHtcbiAgdmFyIHBhdGhuYW1lID0gcGF0aCB8fCAnLyc7XG4gIHZhciBzZWFyY2ggPSAnJztcbiAgdmFyIGhhc2ggPSAnJztcbiAgdmFyIGhhc2hJbmRleCA9IHBhdGhuYW1lLmluZGV4T2YoJyMnKTtcblxuICBpZiAoaGFzaEluZGV4ICE9PSAtMSkge1xuICAgIGhhc2ggPSBwYXRobmFtZS5zdWJzdHIoaGFzaEluZGV4KTtcbiAgICBwYXRobmFtZSA9IHBhdGhuYW1lLnN1YnN0cigwLCBoYXNoSW5kZXgpO1xuICB9XG5cbiAgdmFyIHNlYXJjaEluZGV4ID0gcGF0aG5hbWUuaW5kZXhPZignPycpO1xuXG4gIGlmIChzZWFyY2hJbmRleCAhPT0gLTEpIHtcbiAgICBzZWFyY2ggPSBwYXRobmFtZS5zdWJzdHIoc2VhcmNoSW5kZXgpO1xuICAgIHBhdGhuYW1lID0gcGF0aG5hbWUuc3Vic3RyKDAsIHNlYXJjaEluZGV4KTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcGF0aG5hbWU6IHBhdGhuYW1lLFxuICAgIHNlYXJjaDogc2VhcmNoID09PSAnPycgPyAnJyA6IHNlYXJjaCxcbiAgICBoYXNoOiBoYXNoID09PSAnIycgPyAnJyA6IGhhc2hcbiAgfTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVBhdGgobG9jYXRpb24pIHtcbiAgdmFyIHBhdGhuYW1lID0gbG9jYXRpb24ucGF0aG5hbWUsXG4gICAgICBzZWFyY2ggPSBsb2NhdGlvbi5zZWFyY2gsXG4gICAgICBoYXNoID0gbG9jYXRpb24uaGFzaDtcbiAgdmFyIHBhdGggPSBwYXRobmFtZSB8fCAnLyc7XG4gIGlmIChzZWFyY2ggJiYgc2VhcmNoICE9PSAnPycpIHBhdGggKz0gc2VhcmNoLmNoYXJBdCgwKSA9PT0gJz8nID8gc2VhcmNoIDogXCI/XCIgKyBzZWFyY2g7XG4gIGlmIChoYXNoICYmIGhhc2ggIT09ICcjJykgcGF0aCArPSBoYXNoLmNoYXJBdCgwKSA9PT0gJyMnID8gaGFzaCA6IFwiI1wiICsgaGFzaDtcbiAgcmV0dXJuIHBhdGg7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUxvY2F0aW9uKHBhdGgsIHN0YXRlLCBrZXksIGN1cnJlbnRMb2NhdGlvbikge1xuICB2YXIgbG9jYXRpb247XG5cbiAgaWYgKHR5cGVvZiBwYXRoID09PSAnc3RyaW5nJykge1xuICAgIC8vIFR3by1hcmcgZm9ybTogcHVzaChwYXRoLCBzdGF0ZSlcbiAgICBsb2NhdGlvbiA9IHBhcnNlUGF0aChwYXRoKTtcbiAgICBsb2NhdGlvbi5zdGF0ZSA9IHN0YXRlO1xuICB9IGVsc2Uge1xuICAgIC8vIE9uZS1hcmcgZm9ybTogcHVzaChsb2NhdGlvbilcbiAgICBsb2NhdGlvbiA9IF9leHRlbmRzKHt9LCBwYXRoKTtcbiAgICBpZiAobG9jYXRpb24ucGF0aG5hbWUgPT09IHVuZGVmaW5lZCkgbG9jYXRpb24ucGF0aG5hbWUgPSAnJztcblxuICAgIGlmIChsb2NhdGlvbi5zZWFyY2gpIHtcbiAgICAgIGlmIChsb2NhdGlvbi5zZWFyY2guY2hhckF0KDApICE9PSAnPycpIGxvY2F0aW9uLnNlYXJjaCA9ICc/JyArIGxvY2F0aW9uLnNlYXJjaDtcbiAgICB9IGVsc2Uge1xuICAgICAgbG9jYXRpb24uc2VhcmNoID0gJyc7XG4gICAgfVxuXG4gICAgaWYgKGxvY2F0aW9uLmhhc2gpIHtcbiAgICAgIGlmIChsb2NhdGlvbi5oYXNoLmNoYXJBdCgwKSAhPT0gJyMnKSBsb2NhdGlvbi5oYXNoID0gJyMnICsgbG9jYXRpb24uaGFzaDtcbiAgICB9IGVsc2Uge1xuICAgICAgbG9jYXRpb24uaGFzaCA9ICcnO1xuICAgIH1cblxuICAgIGlmIChzdGF0ZSAhPT0gdW5kZWZpbmVkICYmIGxvY2F0aW9uLnN0YXRlID09PSB1bmRlZmluZWQpIGxvY2F0aW9uLnN0YXRlID0gc3RhdGU7XG4gIH1cblxuICB0cnkge1xuICAgIGxvY2F0aW9uLnBhdGhuYW1lID0gZGVjb2RlVVJJKGxvY2F0aW9uLnBhdGhuYW1lKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGlmIChlIGluc3RhbmNlb2YgVVJJRXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBVUklFcnJvcignUGF0aG5hbWUgXCInICsgbG9jYXRpb24ucGF0aG5hbWUgKyAnXCIgY291bGQgbm90IGJlIGRlY29kZWQuICcgKyAnVGhpcyBpcyBsaWtlbHkgY2F1c2VkIGJ5IGFuIGludmFsaWQgcGVyY2VudC1lbmNvZGluZy4nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgZTtcbiAgICB9XG4gIH1cblxuICBpZiAoa2V5KSBsb2NhdGlvbi5rZXkgPSBrZXk7XG5cbiAgaWYgKGN1cnJlbnRMb2NhdGlvbikge1xuICAgIC8vIFJlc29sdmUgaW5jb21wbGV0ZS9yZWxhdGl2ZSBwYXRobmFtZSByZWxhdGl2ZSB0byBjdXJyZW50IGxvY2F0aW9uLlxuICAgIGlmICghbG9jYXRpb24ucGF0aG5hbWUpIHtcbiAgICAgIGxvY2F0aW9uLnBhdGhuYW1lID0gY3VycmVudExvY2F0aW9uLnBhdGhuYW1lO1xuICAgIH0gZWxzZSBpZiAobG9jYXRpb24ucGF0aG5hbWUuY2hhckF0KDApICE9PSAnLycpIHtcbiAgICAgIGxvY2F0aW9uLnBhdGhuYW1lID0gcmVzb2x2ZVBhdGhuYW1lKGxvY2F0aW9uLnBhdGhuYW1lLCBjdXJyZW50TG9jYXRpb24ucGF0aG5hbWUpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyBXaGVuIHRoZXJlIGlzIG5vIHByaW9yIGxvY2F0aW9uIGFuZCBwYXRobmFtZSBpcyBlbXB0eSwgc2V0IGl0IHRvIC9cbiAgICBpZiAoIWxvY2F0aW9uLnBhdGhuYW1lKSB7XG4gICAgICBsb2NhdGlvbi5wYXRobmFtZSA9ICcvJztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbG9jYXRpb247XG59XG5mdW5jdGlvbiBsb2NhdGlvbnNBcmVFcXVhbChhLCBiKSB7XG4gIHJldHVybiBhLnBhdGhuYW1lID09PSBiLnBhdGhuYW1lICYmIGEuc2VhcmNoID09PSBiLnNlYXJjaCAmJiBhLmhhc2ggPT09IGIuaGFzaCAmJiBhLmtleSA9PT0gYi5rZXkgJiYgdmFsdWVFcXVhbChhLnN0YXRlLCBiLnN0YXRlKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlVHJhbnNpdGlvbk1hbmFnZXIoKSB7XG4gIHZhciBwcm9tcHQgPSBudWxsO1xuXG4gIGZ1bmN0aW9uIHNldFByb21wdChuZXh0UHJvbXB0KSB7XG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiID8gd2FybmluZyhwcm9tcHQgPT0gbnVsbCwgJ0EgaGlzdG9yeSBzdXBwb3J0cyBvbmx5IG9uZSBwcm9tcHQgYXQgYSB0aW1lJykgOiB2b2lkIDA7XG4gICAgcHJvbXB0ID0gbmV4dFByb21wdDtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHByb21wdCA9PT0gbmV4dFByb21wdCkgcHJvbXB0ID0gbnVsbDtcbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gY29uZmlybVRyYW5zaXRpb25Ubyhsb2NhdGlvbiwgYWN0aW9uLCBnZXRVc2VyQ29uZmlybWF0aW9uLCBjYWxsYmFjaykge1xuICAgIC8vIFRPRE86IElmIGFub3RoZXIgdHJhbnNpdGlvbiBzdGFydHMgd2hpbGUgd2UncmUgc3RpbGwgY29uZmlybWluZ1xuICAgIC8vIHRoZSBwcmV2aW91cyBvbmUsIHdlIG1heSBlbmQgdXAgaW4gYSB3ZWlyZCBzdGF0ZS4gRmlndXJlIG91dCB0aGVcbiAgICAvLyBiZXN0IHdheSB0byBoYW5kbGUgdGhpcy5cbiAgICBpZiAocHJvbXB0ICE9IG51bGwpIHtcbiAgICAgIHZhciByZXN1bHQgPSB0eXBlb2YgcHJvbXB0ID09PSAnZnVuY3Rpb24nID8gcHJvbXB0KGxvY2F0aW9uLCBhY3Rpb24pIDogcHJvbXB0O1xuXG4gICAgICBpZiAodHlwZW9mIHJlc3VsdCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBnZXRVc2VyQ29uZmlybWF0aW9uID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgZ2V0VXNlckNvbmZpcm1hdGlvbihyZXN1bHQsIGNhbGxiYWNrKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgPyB3YXJuaW5nKGZhbHNlLCAnQSBoaXN0b3J5IG5lZWRzIGEgZ2V0VXNlckNvbmZpcm1hdGlvbiBmdW5jdGlvbiBpbiBvcmRlciB0byB1c2UgYSBwcm9tcHQgbWVzc2FnZScpIDogdm9pZCAwO1xuICAgICAgICAgIGNhbGxiYWNrKHRydWUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBSZXR1cm4gZmFsc2UgZnJvbSBhIHRyYW5zaXRpb24gaG9vayB0byBjYW5jZWwgdGhlIHRyYW5zaXRpb24uXG4gICAgICAgIGNhbGxiYWNrKHJlc3VsdCAhPT0gZmFsc2UpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjYWxsYmFjayh0cnVlKTtcbiAgICB9XG4gIH1cblxuICB2YXIgbGlzdGVuZXJzID0gW107XG5cbiAgZnVuY3Rpb24gYXBwZW5kTGlzdGVuZXIoZm4pIHtcbiAgICB2YXIgaXNBY3RpdmUgPSB0cnVlO1xuXG4gICAgZnVuY3Rpb24gbGlzdGVuZXIoKSB7XG4gICAgICBpZiAoaXNBY3RpdmUpIGZuLmFwcGx5KHZvaWQgMCwgYXJndW1lbnRzKTtcbiAgICB9XG5cbiAgICBsaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlzQWN0aXZlID0gZmFsc2U7XG4gICAgICBsaXN0ZW5lcnMgPSBsaXN0ZW5lcnMuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIHJldHVybiBpdGVtICE9PSBsaXN0ZW5lcjtcbiAgICAgIH0pO1xuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBub3RpZnlMaXN0ZW5lcnMoKSB7XG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIGxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uIChsaXN0ZW5lcikge1xuICAgICAgcmV0dXJuIGxpc3RlbmVyLmFwcGx5KHZvaWQgMCwgYXJncyk7XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHNldFByb21wdDogc2V0UHJvbXB0LFxuICAgIGNvbmZpcm1UcmFuc2l0aW9uVG86IGNvbmZpcm1UcmFuc2l0aW9uVG8sXG4gICAgYXBwZW5kTGlzdGVuZXI6IGFwcGVuZExpc3RlbmVyLFxuICAgIG5vdGlmeUxpc3RlbmVyczogbm90aWZ5TGlzdGVuZXJzXG4gIH07XG59XG5cbnZhciBjYW5Vc2VET00gPSAhISh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuZG9jdW1lbnQgJiYgd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQpO1xuZnVuY3Rpb24gZ2V0Q29uZmlybWF0aW9uKG1lc3NhZ2UsIGNhbGxiYWNrKSB7XG4gIGNhbGxiYWNrKHdpbmRvdy5jb25maXJtKG1lc3NhZ2UpKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1hbGVydFxufVxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIEhUTUw1IGhpc3RvcnkgQVBJIGlzIHN1cHBvcnRlZC4gVGFrZW4gZnJvbSBNb2Rlcm5penIuXG4gKlxuICogaHR0cHM6Ly9naXRodWIuY29tL01vZGVybml6ci9Nb2Rlcm5penIvYmxvYi9tYXN0ZXIvTElDRU5TRVxuICogaHR0cHM6Ly9naXRodWIuY29tL01vZGVybml6ci9Nb2Rlcm5penIvYmxvYi9tYXN0ZXIvZmVhdHVyZS1kZXRlY3RzL2hpc3RvcnkuanNcbiAqIGNoYW5nZWQgdG8gYXZvaWQgZmFsc2UgbmVnYXRpdmVzIGZvciBXaW5kb3dzIFBob25lczogaHR0cHM6Ly9naXRodWIuY29tL3JlYWN0anMvcmVhY3Qtcm91dGVyL2lzc3Vlcy81ODZcbiAqL1xuXG5mdW5jdGlvbiBzdXBwb3J0c0hpc3RvcnkoKSB7XG4gIHZhciB1YSA9IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50O1xuICBpZiAoKHVhLmluZGV4T2YoJ0FuZHJvaWQgMi4nKSAhPT0gLTEgfHwgdWEuaW5kZXhPZignQW5kcm9pZCA0LjAnKSAhPT0gLTEpICYmIHVhLmluZGV4T2YoJ01vYmlsZSBTYWZhcmknKSAhPT0gLTEgJiYgdWEuaW5kZXhPZignQ2hyb21lJykgPT09IC0xICYmIHVhLmluZGV4T2YoJ1dpbmRvd3MgUGhvbmUnKSA9PT0gLTEpIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuIHdpbmRvdy5oaXN0b3J5ICYmICdwdXNoU3RhdGUnIGluIHdpbmRvdy5oaXN0b3J5O1xufVxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgYnJvd3NlciBmaXJlcyBwb3BzdGF0ZSBvbiBoYXNoIGNoYW5nZS5cbiAqIElFMTAgYW5kIElFMTEgZG8gbm90LlxuICovXG5cbmZ1bmN0aW9uIHN1cHBvcnRzUG9wU3RhdGVPbkhhc2hDaGFuZ2UoKSB7XG4gIHJldHVybiB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdUcmlkZW50JykgPT09IC0xO1xufVxuLyoqXG4gKiBSZXR1cm5zIGZhbHNlIGlmIHVzaW5nIGdvKG4pIHdpdGggaGFzaCBoaXN0b3J5IGNhdXNlcyBhIGZ1bGwgcGFnZSByZWxvYWQuXG4gKi9cblxuZnVuY3Rpb24gc3VwcG9ydHNHb1dpdGhvdXRSZWxvYWRVc2luZ0hhc2goKSB7XG4gIHJldHVybiB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdGaXJlZm94JykgPT09IC0xO1xufVxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgYSBnaXZlbiBwb3BzdGF0ZSBldmVudCBpcyBhbiBleHRyYW5lb3VzIFdlYktpdCBldmVudC5cbiAqIEFjY291bnRzIGZvciB0aGUgZmFjdCB0aGF0IENocm9tZSBvbiBpT1MgZmlyZXMgcmVhbCBwb3BzdGF0ZSBldmVudHNcbiAqIGNvbnRhaW5pbmcgdW5kZWZpbmVkIHN0YXRlIHdoZW4gcHJlc3NpbmcgdGhlIGJhY2sgYnV0dG9uLlxuICovXG5cbmZ1bmN0aW9uIGlzRXh0cmFuZW91c1BvcHN0YXRlRXZlbnQoZXZlbnQpIHtcbiAgZXZlbnQuc3RhdGUgPT09IHVuZGVmaW5lZCAmJiBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ0NyaU9TJykgPT09IC0xO1xufVxuXG52YXIgUG9wU3RhdGVFdmVudCA9ICdwb3BzdGF0ZSc7XG52YXIgSGFzaENoYW5nZUV2ZW50ID0gJ2hhc2hjaGFuZ2UnO1xuXG5mdW5jdGlvbiBnZXRIaXN0b3J5U3RhdGUoKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIHdpbmRvdy5oaXN0b3J5LnN0YXRlIHx8IHt9O1xuICB9IGNhdGNoIChlKSB7XG4gICAgLy8gSUUgMTEgc29tZXRpbWVzIHRocm93cyB3aGVuIGFjY2Vzc2luZyB3aW5kb3cuaGlzdG9yeS5zdGF0ZVxuICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vUmVhY3RUcmFpbmluZy9oaXN0b3J5L3B1bGwvMjg5XG4gICAgcmV0dXJuIHt9O1xuICB9XG59XG4vKipcbiAqIENyZWF0ZXMgYSBoaXN0b3J5IG9iamVjdCB0aGF0IHVzZXMgdGhlIEhUTUw1IGhpc3RvcnkgQVBJIGluY2x1ZGluZ1xuICogcHVzaFN0YXRlLCByZXBsYWNlU3RhdGUsIGFuZCB0aGUgcG9wc3RhdGUgZXZlbnQuXG4gKi9cblxuXG5mdW5jdGlvbiBjcmVhdGVCcm93c2VySGlzdG9yeShwcm9wcykge1xuICBpZiAocHJvcHMgPT09IHZvaWQgMCkge1xuICAgIHByb3BzID0ge307XG4gIH1cblxuICAhY2FuVXNlRE9NID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiID8gaW52YXJpYW50KGZhbHNlLCAnQnJvd3NlciBoaXN0b3J5IG5lZWRzIGEgRE9NJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdm9pZCAwO1xuICB2YXIgZ2xvYmFsSGlzdG9yeSA9IHdpbmRvdy5oaXN0b3J5O1xuICB2YXIgY2FuVXNlSGlzdG9yeSA9IHN1cHBvcnRzSGlzdG9yeSgpO1xuICB2YXIgbmVlZHNIYXNoQ2hhbmdlTGlzdGVuZXIgPSAhc3VwcG9ydHNQb3BTdGF0ZU9uSGFzaENoYW5nZSgpO1xuICB2YXIgX3Byb3BzID0gcHJvcHMsXG4gICAgICBfcHJvcHMkZm9yY2VSZWZyZXNoID0gX3Byb3BzLmZvcmNlUmVmcmVzaCxcbiAgICAgIGZvcmNlUmVmcmVzaCA9IF9wcm9wcyRmb3JjZVJlZnJlc2ggPT09IHZvaWQgMCA/IGZhbHNlIDogX3Byb3BzJGZvcmNlUmVmcmVzaCxcbiAgICAgIF9wcm9wcyRnZXRVc2VyQ29uZmlybSA9IF9wcm9wcy5nZXRVc2VyQ29uZmlybWF0aW9uLFxuICAgICAgZ2V0VXNlckNvbmZpcm1hdGlvbiA9IF9wcm9wcyRnZXRVc2VyQ29uZmlybSA9PT0gdm9pZCAwID8gZ2V0Q29uZmlybWF0aW9uIDogX3Byb3BzJGdldFVzZXJDb25maXJtLFxuICAgICAgX3Byb3BzJGtleUxlbmd0aCA9IF9wcm9wcy5rZXlMZW5ndGgsXG4gICAgICBrZXlMZW5ndGggPSBfcHJvcHMka2V5TGVuZ3RoID09PSB2b2lkIDAgPyA2IDogX3Byb3BzJGtleUxlbmd0aDtcbiAgdmFyIGJhc2VuYW1lID0gcHJvcHMuYmFzZW5hbWUgPyBzdHJpcFRyYWlsaW5nU2xhc2goYWRkTGVhZGluZ1NsYXNoKHByb3BzLmJhc2VuYW1lKSkgOiAnJztcblxuICBmdW5jdGlvbiBnZXRET01Mb2NhdGlvbihoaXN0b3J5U3RhdGUpIHtcbiAgICB2YXIgX3JlZiA9IGhpc3RvcnlTdGF0ZSB8fCB7fSxcbiAgICAgICAga2V5ID0gX3JlZi5rZXksXG4gICAgICAgIHN0YXRlID0gX3JlZi5zdGF0ZTtcblxuICAgIHZhciBfd2luZG93JGxvY2F0aW9uID0gd2luZG93LmxvY2F0aW9uLFxuICAgICAgICBwYXRobmFtZSA9IF93aW5kb3ckbG9jYXRpb24ucGF0aG5hbWUsXG4gICAgICAgIHNlYXJjaCA9IF93aW5kb3ckbG9jYXRpb24uc2VhcmNoLFxuICAgICAgICBoYXNoID0gX3dpbmRvdyRsb2NhdGlvbi5oYXNoO1xuICAgIHZhciBwYXRoID0gcGF0aG5hbWUgKyBzZWFyY2ggKyBoYXNoO1xuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiA/IHdhcm5pbmcoIWJhc2VuYW1lIHx8IGhhc0Jhc2VuYW1lKHBhdGgsIGJhc2VuYW1lKSwgJ1lvdSBhcmUgYXR0ZW1wdGluZyB0byB1c2UgYSBiYXNlbmFtZSBvbiBhIHBhZ2Ugd2hvc2UgVVJMIHBhdGggZG9lcyBub3QgYmVnaW4gJyArICd3aXRoIHRoZSBiYXNlbmFtZS4gRXhwZWN0ZWQgcGF0aCBcIicgKyBwYXRoICsgJ1wiIHRvIGJlZ2luIHdpdGggXCInICsgYmFzZW5hbWUgKyAnXCIuJykgOiB2b2lkIDA7XG4gICAgaWYgKGJhc2VuYW1lKSBwYXRoID0gc3RyaXBCYXNlbmFtZShwYXRoLCBiYXNlbmFtZSk7XG4gICAgcmV0dXJuIGNyZWF0ZUxvY2F0aW9uKHBhdGgsIHN0YXRlLCBrZXkpO1xuICB9XG5cbiAgZnVuY3Rpb24gY3JlYXRlS2V5KCkge1xuICAgIHJldHVybiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwga2V5TGVuZ3RoKTtcbiAgfVxuXG4gIHZhciB0cmFuc2l0aW9uTWFuYWdlciA9IGNyZWF0ZVRyYW5zaXRpb25NYW5hZ2VyKCk7XG5cbiAgZnVuY3Rpb24gc2V0U3RhdGUobmV4dFN0YXRlKSB7XG4gICAgX2V4dGVuZHMoaGlzdG9yeSwgbmV4dFN0YXRlKTtcblxuICAgIGhpc3RvcnkubGVuZ3RoID0gZ2xvYmFsSGlzdG9yeS5sZW5ndGg7XG4gICAgdHJhbnNpdGlvbk1hbmFnZXIubm90aWZ5TGlzdGVuZXJzKGhpc3RvcnkubG9jYXRpb24sIGhpc3RvcnkuYWN0aW9uKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZVBvcFN0YXRlKGV2ZW50KSB7XG4gICAgLy8gSWdub3JlIGV4dHJhbmVvdXMgcG9wc3RhdGUgZXZlbnRzIGluIFdlYktpdC5cbiAgICBpZiAoaXNFeHRyYW5lb3VzUG9wc3RhdGVFdmVudChldmVudCkpIHJldHVybjtcbiAgICBoYW5kbGVQb3AoZ2V0RE9NTG9jYXRpb24oZXZlbnQuc3RhdGUpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZUhhc2hDaGFuZ2UoKSB7XG4gICAgaGFuZGxlUG9wKGdldERPTUxvY2F0aW9uKGdldEhpc3RvcnlTdGF0ZSgpKSk7XG4gIH1cblxuICB2YXIgZm9yY2VOZXh0UG9wID0gZmFsc2U7XG5cbiAgZnVuY3Rpb24gaGFuZGxlUG9wKGxvY2F0aW9uKSB7XG4gICAgaWYgKGZvcmNlTmV4dFBvcCkge1xuICAgICAgZm9yY2VOZXh0UG9wID0gZmFsc2U7XG4gICAgICBzZXRTdGF0ZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgYWN0aW9uID0gJ1BPUCc7XG4gICAgICB0cmFuc2l0aW9uTWFuYWdlci5jb25maXJtVHJhbnNpdGlvblRvKGxvY2F0aW9uLCBhY3Rpb24sIGdldFVzZXJDb25maXJtYXRpb24sIGZ1bmN0aW9uIChvaykge1xuICAgICAgICBpZiAob2spIHtcbiAgICAgICAgICBzZXRTdGF0ZSh7XG4gICAgICAgICAgICBhY3Rpb246IGFjdGlvbixcbiAgICAgICAgICAgIGxvY2F0aW9uOiBsb2NhdGlvblxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldmVydFBvcChsb2NhdGlvbik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJldmVydFBvcChmcm9tTG9jYXRpb24pIHtcbiAgICB2YXIgdG9Mb2NhdGlvbiA9IGhpc3RvcnkubG9jYXRpb247IC8vIFRPRE86IFdlIGNvdWxkIHByb2JhYmx5IG1ha2UgdGhpcyBtb3JlIHJlbGlhYmxlIGJ5XG4gICAgLy8ga2VlcGluZyBhIGxpc3Qgb2Yga2V5cyB3ZSd2ZSBzZWVuIGluIHNlc3Npb25TdG9yYWdlLlxuICAgIC8vIEluc3RlYWQsIHdlIGp1c3QgZGVmYXVsdCB0byAwIGZvciBrZXlzIHdlIGRvbid0IGtub3cuXG5cbiAgICB2YXIgdG9JbmRleCA9IGFsbEtleXMuaW5kZXhPZih0b0xvY2F0aW9uLmtleSk7XG4gICAgaWYgKHRvSW5kZXggPT09IC0xKSB0b0luZGV4ID0gMDtcbiAgICB2YXIgZnJvbUluZGV4ID0gYWxsS2V5cy5pbmRleE9mKGZyb21Mb2NhdGlvbi5rZXkpO1xuICAgIGlmIChmcm9tSW5kZXggPT09IC0xKSBmcm9tSW5kZXggPSAwO1xuICAgIHZhciBkZWx0YSA9IHRvSW5kZXggLSBmcm9tSW5kZXg7XG5cbiAgICBpZiAoZGVsdGEpIHtcbiAgICAgIGZvcmNlTmV4dFBvcCA9IHRydWU7XG4gICAgICBnbyhkZWx0YSk7XG4gICAgfVxuICB9XG5cbiAgdmFyIGluaXRpYWxMb2NhdGlvbiA9IGdldERPTUxvY2F0aW9uKGdldEhpc3RvcnlTdGF0ZSgpKTtcbiAgdmFyIGFsbEtleXMgPSBbaW5pdGlhbExvY2F0aW9uLmtleV07IC8vIFB1YmxpYyBpbnRlcmZhY2VcblxuICBmdW5jdGlvbiBjcmVhdGVIcmVmKGxvY2F0aW9uKSB7XG4gICAgcmV0dXJuIGJhc2VuYW1lICsgY3JlYXRlUGF0aChsb2NhdGlvbik7XG4gIH1cblxuICBmdW5jdGlvbiBwdXNoKHBhdGgsIHN0YXRlKSB7XG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiID8gd2FybmluZyghKHR5cGVvZiBwYXRoID09PSAnb2JqZWN0JyAmJiBwYXRoLnN0YXRlICE9PSB1bmRlZmluZWQgJiYgc3RhdGUgIT09IHVuZGVmaW5lZCksICdZb3Ugc2hvdWxkIGF2b2lkIHByb3ZpZGluZyBhIDJuZCBzdGF0ZSBhcmd1bWVudCB0byBwdXNoIHdoZW4gdGhlIDFzdCAnICsgJ2FyZ3VtZW50IGlzIGEgbG9jYXRpb24tbGlrZSBvYmplY3QgdGhhdCBhbHJlYWR5IGhhcyBzdGF0ZTsgaXQgaXMgaWdub3JlZCcpIDogdm9pZCAwO1xuICAgIHZhciBhY3Rpb24gPSAnUFVTSCc7XG4gICAgdmFyIGxvY2F0aW9uID0gY3JlYXRlTG9jYXRpb24ocGF0aCwgc3RhdGUsIGNyZWF0ZUtleSgpLCBoaXN0b3J5LmxvY2F0aW9uKTtcbiAgICB0cmFuc2l0aW9uTWFuYWdlci5jb25maXJtVHJhbnNpdGlvblRvKGxvY2F0aW9uLCBhY3Rpb24sIGdldFVzZXJDb25maXJtYXRpb24sIGZ1bmN0aW9uIChvaykge1xuICAgICAgaWYgKCFvaykgcmV0dXJuO1xuICAgICAgdmFyIGhyZWYgPSBjcmVhdGVIcmVmKGxvY2F0aW9uKTtcbiAgICAgIHZhciBrZXkgPSBsb2NhdGlvbi5rZXksXG4gICAgICAgICAgc3RhdGUgPSBsb2NhdGlvbi5zdGF0ZTtcblxuICAgICAgaWYgKGNhblVzZUhpc3RvcnkpIHtcbiAgICAgICAgZ2xvYmFsSGlzdG9yeS5wdXNoU3RhdGUoe1xuICAgICAgICAgIGtleToga2V5LFxuICAgICAgICAgIHN0YXRlOiBzdGF0ZVxuICAgICAgICB9LCBudWxsLCBocmVmKTtcblxuICAgICAgICBpZiAoZm9yY2VSZWZyZXNoKSB7XG4gICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBocmVmO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBwcmV2SW5kZXggPSBhbGxLZXlzLmluZGV4T2YoaGlzdG9yeS5sb2NhdGlvbi5rZXkpO1xuICAgICAgICAgIHZhciBuZXh0S2V5cyA9IGFsbEtleXMuc2xpY2UoMCwgcHJldkluZGV4ID09PSAtMSA/IDAgOiBwcmV2SW5kZXggKyAxKTtcbiAgICAgICAgICBuZXh0S2V5cy5wdXNoKGxvY2F0aW9uLmtleSk7XG4gICAgICAgICAgYWxsS2V5cyA9IG5leHRLZXlzO1xuICAgICAgICAgIHNldFN0YXRlKHtcbiAgICAgICAgICAgIGFjdGlvbjogYWN0aW9uLFxuICAgICAgICAgICAgbG9jYXRpb246IGxvY2F0aW9uXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiA/IHdhcm5pbmcoc3RhdGUgPT09IHVuZGVmaW5lZCwgJ0Jyb3dzZXIgaGlzdG9yeSBjYW5ub3QgcHVzaCBzdGF0ZSBpbiBicm93c2VycyB0aGF0IGRvIG5vdCBzdXBwb3J0IEhUTUw1IGhpc3RvcnknKSA6IHZvaWQgMDtcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBocmVmO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVwbGFjZShwYXRoLCBzdGF0ZSkge1xuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiA/IHdhcm5pbmcoISh0eXBlb2YgcGF0aCA9PT0gJ29iamVjdCcgJiYgcGF0aC5zdGF0ZSAhPT0gdW5kZWZpbmVkICYmIHN0YXRlICE9PSB1bmRlZmluZWQpLCAnWW91IHNob3VsZCBhdm9pZCBwcm92aWRpbmcgYSAybmQgc3RhdGUgYXJndW1lbnQgdG8gcmVwbGFjZSB3aGVuIHRoZSAxc3QgJyArICdhcmd1bWVudCBpcyBhIGxvY2F0aW9uLWxpa2Ugb2JqZWN0IHRoYXQgYWxyZWFkeSBoYXMgc3RhdGU7IGl0IGlzIGlnbm9yZWQnKSA6IHZvaWQgMDtcbiAgICB2YXIgYWN0aW9uID0gJ1JFUExBQ0UnO1xuICAgIHZhciBsb2NhdGlvbiA9IGNyZWF0ZUxvY2F0aW9uKHBhdGgsIHN0YXRlLCBjcmVhdGVLZXkoKSwgaGlzdG9yeS5sb2NhdGlvbik7XG4gICAgdHJhbnNpdGlvbk1hbmFnZXIuY29uZmlybVRyYW5zaXRpb25Ubyhsb2NhdGlvbiwgYWN0aW9uLCBnZXRVc2VyQ29uZmlybWF0aW9uLCBmdW5jdGlvbiAob2spIHtcbiAgICAgIGlmICghb2spIHJldHVybjtcbiAgICAgIHZhciBocmVmID0gY3JlYXRlSHJlZihsb2NhdGlvbik7XG4gICAgICB2YXIga2V5ID0gbG9jYXRpb24ua2V5LFxuICAgICAgICAgIHN0YXRlID0gbG9jYXRpb24uc3RhdGU7XG5cbiAgICAgIGlmIChjYW5Vc2VIaXN0b3J5KSB7XG4gICAgICAgIGdsb2JhbEhpc3RvcnkucmVwbGFjZVN0YXRlKHtcbiAgICAgICAgICBrZXk6IGtleSxcbiAgICAgICAgICBzdGF0ZTogc3RhdGVcbiAgICAgICAgfSwgbnVsbCwgaHJlZik7XG5cbiAgICAgICAgaWYgKGZvcmNlUmVmcmVzaCkge1xuICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKGhyZWYpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBwcmV2SW5kZXggPSBhbGxLZXlzLmluZGV4T2YoaGlzdG9yeS5sb2NhdGlvbi5rZXkpO1xuICAgICAgICAgIGlmIChwcmV2SW5kZXggIT09IC0xKSBhbGxLZXlzW3ByZXZJbmRleF0gPSBsb2NhdGlvbi5rZXk7XG4gICAgICAgICAgc2V0U3RhdGUoe1xuICAgICAgICAgICAgYWN0aW9uOiBhY3Rpb24sXG4gICAgICAgICAgICBsb2NhdGlvbjogbG9jYXRpb25cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiID8gd2FybmluZyhzdGF0ZSA9PT0gdW5kZWZpbmVkLCAnQnJvd3NlciBoaXN0b3J5IGNhbm5vdCByZXBsYWNlIHN0YXRlIGluIGJyb3dzZXJzIHRoYXQgZG8gbm90IHN1cHBvcnQgSFRNTDUgaGlzdG9yeScpIDogdm9pZCAwO1xuICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZShocmVmKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdvKG4pIHtcbiAgICBnbG9iYWxIaXN0b3J5LmdvKG4pO1xuICB9XG5cbiAgZnVuY3Rpb24gZ29CYWNrKCkge1xuICAgIGdvKC0xKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdvRm9yd2FyZCgpIHtcbiAgICBnbygxKTtcbiAgfVxuXG4gIHZhciBsaXN0ZW5lckNvdW50ID0gMDtcblxuICBmdW5jdGlvbiBjaGVja0RPTUxpc3RlbmVycyhkZWx0YSkge1xuICAgIGxpc3RlbmVyQ291bnQgKz0gZGVsdGE7XG5cbiAgICBpZiAobGlzdGVuZXJDb3VudCA9PT0gMSAmJiBkZWx0YSA9PT0gMSkge1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoUG9wU3RhdGVFdmVudCwgaGFuZGxlUG9wU3RhdGUpO1xuICAgICAgaWYgKG5lZWRzSGFzaENoYW5nZUxpc3RlbmVyKSB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihIYXNoQ2hhbmdlRXZlbnQsIGhhbmRsZUhhc2hDaGFuZ2UpO1xuICAgIH0gZWxzZSBpZiAobGlzdGVuZXJDb3VudCA9PT0gMCkge1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoUG9wU3RhdGVFdmVudCwgaGFuZGxlUG9wU3RhdGUpO1xuICAgICAgaWYgKG5lZWRzSGFzaENoYW5nZUxpc3RlbmVyKSB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihIYXNoQ2hhbmdlRXZlbnQsIGhhbmRsZUhhc2hDaGFuZ2UpO1xuICAgIH1cbiAgfVxuXG4gIHZhciBpc0Jsb2NrZWQgPSBmYWxzZTtcblxuICBmdW5jdGlvbiBibG9jayhwcm9tcHQpIHtcbiAgICBpZiAocHJvbXB0ID09PSB2b2lkIDApIHtcbiAgICAgIHByb21wdCA9IGZhbHNlO1xuICAgIH1cblxuICAgIHZhciB1bmJsb2NrID0gdHJhbnNpdGlvbk1hbmFnZXIuc2V0UHJvbXB0KHByb21wdCk7XG5cbiAgICBpZiAoIWlzQmxvY2tlZCkge1xuICAgICAgY2hlY2tET01MaXN0ZW5lcnMoMSk7XG4gICAgICBpc0Jsb2NrZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoaXNCbG9ja2VkKSB7XG4gICAgICAgIGlzQmxvY2tlZCA9IGZhbHNlO1xuICAgICAgICBjaGVja0RPTUxpc3RlbmVycygtMSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB1bmJsb2NrKCk7XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGxpc3RlbihsaXN0ZW5lcikge1xuICAgIHZhciB1bmxpc3RlbiA9IHRyYW5zaXRpb25NYW5hZ2VyLmFwcGVuZExpc3RlbmVyKGxpc3RlbmVyKTtcbiAgICBjaGVja0RPTUxpc3RlbmVycygxKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgY2hlY2tET01MaXN0ZW5lcnMoLTEpO1xuICAgICAgdW5saXN0ZW4oKTtcbiAgICB9O1xuICB9XG5cbiAgdmFyIGhpc3RvcnkgPSB7XG4gICAgbGVuZ3RoOiBnbG9iYWxIaXN0b3J5Lmxlbmd0aCxcbiAgICBhY3Rpb246ICdQT1AnLFxuICAgIGxvY2F0aW9uOiBpbml0aWFsTG9jYXRpb24sXG4gICAgY3JlYXRlSHJlZjogY3JlYXRlSHJlZixcbiAgICBwdXNoOiBwdXNoLFxuICAgIHJlcGxhY2U6IHJlcGxhY2UsXG4gICAgZ286IGdvLFxuICAgIGdvQmFjazogZ29CYWNrLFxuICAgIGdvRm9yd2FyZDogZ29Gb3J3YXJkLFxuICAgIGJsb2NrOiBibG9jayxcbiAgICBsaXN0ZW46IGxpc3RlblxuICB9O1xuICByZXR1cm4gaGlzdG9yeTtcbn1cblxudmFyIEhhc2hDaGFuZ2VFdmVudCQxID0gJ2hhc2hjaGFuZ2UnO1xudmFyIEhhc2hQYXRoQ29kZXJzID0ge1xuICBoYXNoYmFuZzoge1xuICAgIGVuY29kZVBhdGg6IGZ1bmN0aW9uIGVuY29kZVBhdGgocGF0aCkge1xuICAgICAgcmV0dXJuIHBhdGguY2hhckF0KDApID09PSAnIScgPyBwYXRoIDogJyEvJyArIHN0cmlwTGVhZGluZ1NsYXNoKHBhdGgpO1xuICAgIH0sXG4gICAgZGVjb2RlUGF0aDogZnVuY3Rpb24gZGVjb2RlUGF0aChwYXRoKSB7XG4gICAgICByZXR1cm4gcGF0aC5jaGFyQXQoMCkgPT09ICchJyA/IHBhdGguc3Vic3RyKDEpIDogcGF0aDtcbiAgICB9XG4gIH0sXG4gIG5vc2xhc2g6IHtcbiAgICBlbmNvZGVQYXRoOiBzdHJpcExlYWRpbmdTbGFzaCxcbiAgICBkZWNvZGVQYXRoOiBhZGRMZWFkaW5nU2xhc2hcbiAgfSxcbiAgc2xhc2g6IHtcbiAgICBlbmNvZGVQYXRoOiBhZGRMZWFkaW5nU2xhc2gsXG4gICAgZGVjb2RlUGF0aDogYWRkTGVhZGluZ1NsYXNoXG4gIH1cbn07XG5cbmZ1bmN0aW9uIGdldEhhc2hQYXRoKCkge1xuICAvLyBXZSBjYW4ndCB1c2Ugd2luZG93LmxvY2F0aW9uLmhhc2ggaGVyZSBiZWNhdXNlIGl0J3Mgbm90XG4gIC8vIGNvbnNpc3RlbnQgYWNyb3NzIGJyb3dzZXJzIC0gRmlyZWZveCB3aWxsIHByZS1kZWNvZGUgaXQhXG4gIHZhciBocmVmID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XG4gIHZhciBoYXNoSW5kZXggPSBocmVmLmluZGV4T2YoJyMnKTtcbiAgcmV0dXJuIGhhc2hJbmRleCA9PT0gLTEgPyAnJyA6IGhyZWYuc3Vic3RyaW5nKGhhc2hJbmRleCArIDEpO1xufVxuXG5mdW5jdGlvbiBwdXNoSGFzaFBhdGgocGF0aCkge1xuICB3aW5kb3cubG9jYXRpb24uaGFzaCA9IHBhdGg7XG59XG5cbmZ1bmN0aW9uIHJlcGxhY2VIYXNoUGF0aChwYXRoKSB7XG4gIHZhciBoYXNoSW5kZXggPSB3aW5kb3cubG9jYXRpb24uaHJlZi5pbmRleE9mKCcjJyk7XG4gIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKHdpbmRvdy5sb2NhdGlvbi5ocmVmLnNsaWNlKDAsIGhhc2hJbmRleCA+PSAwID8gaGFzaEluZGV4IDogMCkgKyAnIycgKyBwYXRoKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlSGFzaEhpc3RvcnkocHJvcHMpIHtcbiAgaWYgKHByb3BzID09PSB2b2lkIDApIHtcbiAgICBwcm9wcyA9IHt9O1xuICB9XG5cbiAgIWNhblVzZURPTSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiA/IGludmFyaWFudChmYWxzZSwgJ0hhc2ggaGlzdG9yeSBuZWVkcyBhIERPTScpIDogaW52YXJpYW50KGZhbHNlKSA6IHZvaWQgMDtcbiAgdmFyIGdsb2JhbEhpc3RvcnkgPSB3aW5kb3cuaGlzdG9yeTtcbiAgdmFyIGNhbkdvV2l0aG91dFJlbG9hZCA9IHN1cHBvcnRzR29XaXRob3V0UmVsb2FkVXNpbmdIYXNoKCk7XG4gIHZhciBfcHJvcHMgPSBwcm9wcyxcbiAgICAgIF9wcm9wcyRnZXRVc2VyQ29uZmlybSA9IF9wcm9wcy5nZXRVc2VyQ29uZmlybWF0aW9uLFxuICAgICAgZ2V0VXNlckNvbmZpcm1hdGlvbiA9IF9wcm9wcyRnZXRVc2VyQ29uZmlybSA9PT0gdm9pZCAwID8gZ2V0Q29uZmlybWF0aW9uIDogX3Byb3BzJGdldFVzZXJDb25maXJtLFxuICAgICAgX3Byb3BzJGhhc2hUeXBlID0gX3Byb3BzLmhhc2hUeXBlLFxuICAgICAgaGFzaFR5cGUgPSBfcHJvcHMkaGFzaFR5cGUgPT09IHZvaWQgMCA/ICdzbGFzaCcgOiBfcHJvcHMkaGFzaFR5cGU7XG4gIHZhciBiYXNlbmFtZSA9IHByb3BzLmJhc2VuYW1lID8gc3RyaXBUcmFpbGluZ1NsYXNoKGFkZExlYWRpbmdTbGFzaChwcm9wcy5iYXNlbmFtZSkpIDogJyc7XG4gIHZhciBfSGFzaFBhdGhDb2RlcnMkaGFzaFQgPSBIYXNoUGF0aENvZGVyc1toYXNoVHlwZV0sXG4gICAgICBlbmNvZGVQYXRoID0gX0hhc2hQYXRoQ29kZXJzJGhhc2hULmVuY29kZVBhdGgsXG4gICAgICBkZWNvZGVQYXRoID0gX0hhc2hQYXRoQ29kZXJzJGhhc2hULmRlY29kZVBhdGg7XG5cbiAgZnVuY3Rpb24gZ2V0RE9NTG9jYXRpb24oKSB7XG4gICAgdmFyIHBhdGggPSBkZWNvZGVQYXRoKGdldEhhc2hQYXRoKCkpO1xuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiA/IHdhcm5pbmcoIWJhc2VuYW1lIHx8IGhhc0Jhc2VuYW1lKHBhdGgsIGJhc2VuYW1lKSwgJ1lvdSBhcmUgYXR0ZW1wdGluZyB0byB1c2UgYSBiYXNlbmFtZSBvbiBhIHBhZ2Ugd2hvc2UgVVJMIHBhdGggZG9lcyBub3QgYmVnaW4gJyArICd3aXRoIHRoZSBiYXNlbmFtZS4gRXhwZWN0ZWQgcGF0aCBcIicgKyBwYXRoICsgJ1wiIHRvIGJlZ2luIHdpdGggXCInICsgYmFzZW5hbWUgKyAnXCIuJykgOiB2b2lkIDA7XG4gICAgaWYgKGJhc2VuYW1lKSBwYXRoID0gc3RyaXBCYXNlbmFtZShwYXRoLCBiYXNlbmFtZSk7XG4gICAgcmV0dXJuIGNyZWF0ZUxvY2F0aW9uKHBhdGgpO1xuICB9XG5cbiAgdmFyIHRyYW5zaXRpb25NYW5hZ2VyID0gY3JlYXRlVHJhbnNpdGlvbk1hbmFnZXIoKTtcblxuICBmdW5jdGlvbiBzZXRTdGF0ZShuZXh0U3RhdGUpIHtcbiAgICBfZXh0ZW5kcyhoaXN0b3J5LCBuZXh0U3RhdGUpO1xuXG4gICAgaGlzdG9yeS5sZW5ndGggPSBnbG9iYWxIaXN0b3J5Lmxlbmd0aDtcbiAgICB0cmFuc2l0aW9uTWFuYWdlci5ub3RpZnlMaXN0ZW5lcnMoaGlzdG9yeS5sb2NhdGlvbiwgaGlzdG9yeS5hY3Rpb24pO1xuICB9XG5cbiAgdmFyIGZvcmNlTmV4dFBvcCA9IGZhbHNlO1xuICB2YXIgaWdub3JlUGF0aCA9IG51bGw7XG5cbiAgZnVuY3Rpb24gaGFuZGxlSGFzaENoYW5nZSgpIHtcbiAgICB2YXIgcGF0aCA9IGdldEhhc2hQYXRoKCk7XG4gICAgdmFyIGVuY29kZWRQYXRoID0gZW5jb2RlUGF0aChwYXRoKTtcblxuICAgIGlmIChwYXRoICE9PSBlbmNvZGVkUGF0aCkge1xuICAgICAgLy8gRW5zdXJlIHdlIGFsd2F5cyBoYXZlIGEgcHJvcGVybHktZW5jb2RlZCBoYXNoLlxuICAgICAgcmVwbGFjZUhhc2hQYXRoKGVuY29kZWRQYXRoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGxvY2F0aW9uID0gZ2V0RE9NTG9jYXRpb24oKTtcbiAgICAgIHZhciBwcmV2TG9jYXRpb24gPSBoaXN0b3J5LmxvY2F0aW9uO1xuICAgICAgaWYgKCFmb3JjZU5leHRQb3AgJiYgbG9jYXRpb25zQXJlRXF1YWwocHJldkxvY2F0aW9uLCBsb2NhdGlvbikpIHJldHVybjsgLy8gQSBoYXNoY2hhbmdlIGRvZXNuJ3QgYWx3YXlzID09IGxvY2F0aW9uIGNoYW5nZS5cblxuICAgICAgaWYgKGlnbm9yZVBhdGggPT09IGNyZWF0ZVBhdGgobG9jYXRpb24pKSByZXR1cm47IC8vIElnbm9yZSB0aGlzIGNoYW5nZTsgd2UgYWxyZWFkeSBzZXRTdGF0ZSBpbiBwdXNoL3JlcGxhY2UuXG5cbiAgICAgIGlnbm9yZVBhdGggPSBudWxsO1xuICAgICAgaGFuZGxlUG9wKGxvY2F0aW9uKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVQb3AobG9jYXRpb24pIHtcbiAgICBpZiAoZm9yY2VOZXh0UG9wKSB7XG4gICAgICBmb3JjZU5leHRQb3AgPSBmYWxzZTtcbiAgICAgIHNldFN0YXRlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBhY3Rpb24gPSAnUE9QJztcbiAgICAgIHRyYW5zaXRpb25NYW5hZ2VyLmNvbmZpcm1UcmFuc2l0aW9uVG8obG9jYXRpb24sIGFjdGlvbiwgZ2V0VXNlckNvbmZpcm1hdGlvbiwgZnVuY3Rpb24gKG9rKSB7XG4gICAgICAgIGlmIChvaykge1xuICAgICAgICAgIHNldFN0YXRlKHtcbiAgICAgICAgICAgIGFjdGlvbjogYWN0aW9uLFxuICAgICAgICAgICAgbG9jYXRpb246IGxvY2F0aW9uXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV2ZXJ0UG9wKGxvY2F0aW9uKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcmV2ZXJ0UG9wKGZyb21Mb2NhdGlvbikge1xuICAgIHZhciB0b0xvY2F0aW9uID0gaGlzdG9yeS5sb2NhdGlvbjsgLy8gVE9ETzogV2UgY291bGQgcHJvYmFibHkgbWFrZSB0aGlzIG1vcmUgcmVsaWFibGUgYnlcbiAgICAvLyBrZWVwaW5nIGEgbGlzdCBvZiBwYXRocyB3ZSd2ZSBzZWVuIGluIHNlc3Npb25TdG9yYWdlLlxuICAgIC8vIEluc3RlYWQsIHdlIGp1c3QgZGVmYXVsdCB0byAwIGZvciBwYXRocyB3ZSBkb24ndCBrbm93LlxuXG4gICAgdmFyIHRvSW5kZXggPSBhbGxQYXRocy5sYXN0SW5kZXhPZihjcmVhdGVQYXRoKHRvTG9jYXRpb24pKTtcbiAgICBpZiAodG9JbmRleCA9PT0gLTEpIHRvSW5kZXggPSAwO1xuICAgIHZhciBmcm9tSW5kZXggPSBhbGxQYXRocy5sYXN0SW5kZXhPZihjcmVhdGVQYXRoKGZyb21Mb2NhdGlvbikpO1xuICAgIGlmIChmcm9tSW5kZXggPT09IC0xKSBmcm9tSW5kZXggPSAwO1xuICAgIHZhciBkZWx0YSA9IHRvSW5kZXggLSBmcm9tSW5kZXg7XG5cbiAgICBpZiAoZGVsdGEpIHtcbiAgICAgIGZvcmNlTmV4dFBvcCA9IHRydWU7XG4gICAgICBnbyhkZWx0YSk7XG4gICAgfVxuICB9IC8vIEVuc3VyZSB0aGUgaGFzaCBpcyBlbmNvZGVkIHByb3Blcmx5IGJlZm9yZSBkb2luZyBhbnl0aGluZyBlbHNlLlxuXG5cbiAgdmFyIHBhdGggPSBnZXRIYXNoUGF0aCgpO1xuICB2YXIgZW5jb2RlZFBhdGggPSBlbmNvZGVQYXRoKHBhdGgpO1xuICBpZiAocGF0aCAhPT0gZW5jb2RlZFBhdGgpIHJlcGxhY2VIYXNoUGF0aChlbmNvZGVkUGF0aCk7XG4gIHZhciBpbml0aWFsTG9jYXRpb24gPSBnZXRET01Mb2NhdGlvbigpO1xuICB2YXIgYWxsUGF0aHMgPSBbY3JlYXRlUGF0aChpbml0aWFsTG9jYXRpb24pXTsgLy8gUHVibGljIGludGVyZmFjZVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZUhyZWYobG9jYXRpb24pIHtcbiAgICByZXR1cm4gJyMnICsgZW5jb2RlUGF0aChiYXNlbmFtZSArIGNyZWF0ZVBhdGgobG9jYXRpb24pKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHB1c2gocGF0aCwgc3RhdGUpIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgPyB3YXJuaW5nKHN0YXRlID09PSB1bmRlZmluZWQsICdIYXNoIGhpc3RvcnkgY2Fubm90IHB1c2ggc3RhdGU7IGl0IGlzIGlnbm9yZWQnKSA6IHZvaWQgMDtcbiAgICB2YXIgYWN0aW9uID0gJ1BVU0gnO1xuICAgIHZhciBsb2NhdGlvbiA9IGNyZWF0ZUxvY2F0aW9uKHBhdGgsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBoaXN0b3J5LmxvY2F0aW9uKTtcbiAgICB0cmFuc2l0aW9uTWFuYWdlci5jb25maXJtVHJhbnNpdGlvblRvKGxvY2F0aW9uLCBhY3Rpb24sIGdldFVzZXJDb25maXJtYXRpb24sIGZ1bmN0aW9uIChvaykge1xuICAgICAgaWYgKCFvaykgcmV0dXJuO1xuICAgICAgdmFyIHBhdGggPSBjcmVhdGVQYXRoKGxvY2F0aW9uKTtcbiAgICAgIHZhciBlbmNvZGVkUGF0aCA9IGVuY29kZVBhdGgoYmFzZW5hbWUgKyBwYXRoKTtcbiAgICAgIHZhciBoYXNoQ2hhbmdlZCA9IGdldEhhc2hQYXRoKCkgIT09IGVuY29kZWRQYXRoO1xuXG4gICAgICBpZiAoaGFzaENoYW5nZWQpIHtcbiAgICAgICAgLy8gV2UgY2Fubm90IHRlbGwgaWYgYSBoYXNoY2hhbmdlIHdhcyBjYXVzZWQgYnkgYSBQVVNILCBzbyB3ZSdkXG4gICAgICAgIC8vIHJhdGhlciBzZXRTdGF0ZSBoZXJlIGFuZCBpZ25vcmUgdGhlIGhhc2hjaGFuZ2UuIFRoZSBjYXZlYXQgaGVyZVxuICAgICAgICAvLyBpcyB0aGF0IG90aGVyIGhhc2ggaGlzdG9yaWVzIGluIHRoZSBwYWdlIHdpbGwgY29uc2lkZXIgaXQgYSBQT1AuXG4gICAgICAgIGlnbm9yZVBhdGggPSBwYXRoO1xuICAgICAgICBwdXNoSGFzaFBhdGgoZW5jb2RlZFBhdGgpO1xuICAgICAgICB2YXIgcHJldkluZGV4ID0gYWxsUGF0aHMubGFzdEluZGV4T2YoY3JlYXRlUGF0aChoaXN0b3J5LmxvY2F0aW9uKSk7XG4gICAgICAgIHZhciBuZXh0UGF0aHMgPSBhbGxQYXRocy5zbGljZSgwLCBwcmV2SW5kZXggPT09IC0xID8gMCA6IHByZXZJbmRleCArIDEpO1xuICAgICAgICBuZXh0UGF0aHMucHVzaChwYXRoKTtcbiAgICAgICAgYWxsUGF0aHMgPSBuZXh0UGF0aHM7XG4gICAgICAgIHNldFN0YXRlKHtcbiAgICAgICAgICBhY3Rpb246IGFjdGlvbixcbiAgICAgICAgICBsb2NhdGlvbjogbG9jYXRpb25cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgPyB3YXJuaW5nKGZhbHNlLCAnSGFzaCBoaXN0b3J5IGNhbm5vdCBQVVNIIHRoZSBzYW1lIHBhdGg7IGEgbmV3IGVudHJ5IHdpbGwgbm90IGJlIGFkZGVkIHRvIHRoZSBoaXN0b3J5IHN0YWNrJykgOiB2b2lkIDA7XG4gICAgICAgIHNldFN0YXRlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiByZXBsYWNlKHBhdGgsIHN0YXRlKSB7XG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiID8gd2FybmluZyhzdGF0ZSA9PT0gdW5kZWZpbmVkLCAnSGFzaCBoaXN0b3J5IGNhbm5vdCByZXBsYWNlIHN0YXRlOyBpdCBpcyBpZ25vcmVkJykgOiB2b2lkIDA7XG4gICAgdmFyIGFjdGlvbiA9ICdSRVBMQUNFJztcbiAgICB2YXIgbG9jYXRpb24gPSBjcmVhdGVMb2NhdGlvbihwYXRoLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgaGlzdG9yeS5sb2NhdGlvbik7XG4gICAgdHJhbnNpdGlvbk1hbmFnZXIuY29uZmlybVRyYW5zaXRpb25Ubyhsb2NhdGlvbiwgYWN0aW9uLCBnZXRVc2VyQ29uZmlybWF0aW9uLCBmdW5jdGlvbiAob2spIHtcbiAgICAgIGlmICghb2spIHJldHVybjtcbiAgICAgIHZhciBwYXRoID0gY3JlYXRlUGF0aChsb2NhdGlvbik7XG4gICAgICB2YXIgZW5jb2RlZFBhdGggPSBlbmNvZGVQYXRoKGJhc2VuYW1lICsgcGF0aCk7XG4gICAgICB2YXIgaGFzaENoYW5nZWQgPSBnZXRIYXNoUGF0aCgpICE9PSBlbmNvZGVkUGF0aDtcblxuICAgICAgaWYgKGhhc2hDaGFuZ2VkKSB7XG4gICAgICAgIC8vIFdlIGNhbm5vdCB0ZWxsIGlmIGEgaGFzaGNoYW5nZSB3YXMgY2F1c2VkIGJ5IGEgUkVQTEFDRSwgc28gd2UnZFxuICAgICAgICAvLyByYXRoZXIgc2V0U3RhdGUgaGVyZSBhbmQgaWdub3JlIHRoZSBoYXNoY2hhbmdlLiBUaGUgY2F2ZWF0IGhlcmVcbiAgICAgICAgLy8gaXMgdGhhdCBvdGhlciBoYXNoIGhpc3RvcmllcyBpbiB0aGUgcGFnZSB3aWxsIGNvbnNpZGVyIGl0IGEgUE9QLlxuICAgICAgICBpZ25vcmVQYXRoID0gcGF0aDtcbiAgICAgICAgcmVwbGFjZUhhc2hQYXRoKGVuY29kZWRQYXRoKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHByZXZJbmRleCA9IGFsbFBhdGhzLmluZGV4T2YoY3JlYXRlUGF0aChoaXN0b3J5LmxvY2F0aW9uKSk7XG4gICAgICBpZiAocHJldkluZGV4ICE9PSAtMSkgYWxsUGF0aHNbcHJldkluZGV4XSA9IHBhdGg7XG4gICAgICBzZXRTdGF0ZSh7XG4gICAgICAgIGFjdGlvbjogYWN0aW9uLFxuICAgICAgICBsb2NhdGlvbjogbG9jYXRpb25cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gZ28obikge1xuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiA/IHdhcm5pbmcoY2FuR29XaXRob3V0UmVsb2FkLCAnSGFzaCBoaXN0b3J5IGdvKG4pIGNhdXNlcyBhIGZ1bGwgcGFnZSByZWxvYWQgaW4gdGhpcyBicm93c2VyJykgOiB2b2lkIDA7XG4gICAgZ2xvYmFsSGlzdG9yeS5nbyhuKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdvQmFjaygpIHtcbiAgICBnbygtMSk7XG4gIH1cblxuICBmdW5jdGlvbiBnb0ZvcndhcmQoKSB7XG4gICAgZ28oMSk7XG4gIH1cblxuICB2YXIgbGlzdGVuZXJDb3VudCA9IDA7XG5cbiAgZnVuY3Rpb24gY2hlY2tET01MaXN0ZW5lcnMoZGVsdGEpIHtcbiAgICBsaXN0ZW5lckNvdW50ICs9IGRlbHRhO1xuXG4gICAgaWYgKGxpc3RlbmVyQ291bnQgPT09IDEgJiYgZGVsdGEgPT09IDEpIHtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKEhhc2hDaGFuZ2VFdmVudCQxLCBoYW5kbGVIYXNoQ2hhbmdlKTtcbiAgICB9IGVsc2UgaWYgKGxpc3RlbmVyQ291bnQgPT09IDApIHtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKEhhc2hDaGFuZ2VFdmVudCQxLCBoYW5kbGVIYXNoQ2hhbmdlKTtcbiAgICB9XG4gIH1cblxuICB2YXIgaXNCbG9ja2VkID0gZmFsc2U7XG5cbiAgZnVuY3Rpb24gYmxvY2socHJvbXB0KSB7XG4gICAgaWYgKHByb21wdCA9PT0gdm9pZCAwKSB7XG4gICAgICBwcm9tcHQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICB2YXIgdW5ibG9jayA9IHRyYW5zaXRpb25NYW5hZ2VyLnNldFByb21wdChwcm9tcHQpO1xuXG4gICAgaWYgKCFpc0Jsb2NrZWQpIHtcbiAgICAgIGNoZWNrRE9NTGlzdGVuZXJzKDEpO1xuICAgICAgaXNCbG9ja2VkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKGlzQmxvY2tlZCkge1xuICAgICAgICBpc0Jsb2NrZWQgPSBmYWxzZTtcbiAgICAgICAgY2hlY2tET01MaXN0ZW5lcnMoLTEpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdW5ibG9jaygpO1xuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBsaXN0ZW4obGlzdGVuZXIpIHtcbiAgICB2YXIgdW5saXN0ZW4gPSB0cmFuc2l0aW9uTWFuYWdlci5hcHBlbmRMaXN0ZW5lcihsaXN0ZW5lcik7XG4gICAgY2hlY2tET01MaXN0ZW5lcnMoMSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNoZWNrRE9NTGlzdGVuZXJzKC0xKTtcbiAgICAgIHVubGlzdGVuKCk7XG4gICAgfTtcbiAgfVxuXG4gIHZhciBoaXN0b3J5ID0ge1xuICAgIGxlbmd0aDogZ2xvYmFsSGlzdG9yeS5sZW5ndGgsXG4gICAgYWN0aW9uOiAnUE9QJyxcbiAgICBsb2NhdGlvbjogaW5pdGlhbExvY2F0aW9uLFxuICAgIGNyZWF0ZUhyZWY6IGNyZWF0ZUhyZWYsXG4gICAgcHVzaDogcHVzaCxcbiAgICByZXBsYWNlOiByZXBsYWNlLFxuICAgIGdvOiBnbyxcbiAgICBnb0JhY2s6IGdvQmFjayxcbiAgICBnb0ZvcndhcmQ6IGdvRm9yd2FyZCxcbiAgICBibG9jazogYmxvY2ssXG4gICAgbGlzdGVuOiBsaXN0ZW5cbiAgfTtcbiAgcmV0dXJuIGhpc3Rvcnk7XG59XG5cbmZ1bmN0aW9uIGNsYW1wKG4sIGxvd2VyQm91bmQsIHVwcGVyQm91bmQpIHtcbiAgcmV0dXJuIE1hdGgubWluKE1hdGgubWF4KG4sIGxvd2VyQm91bmQpLCB1cHBlckJvdW5kKTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIGhpc3Rvcnkgb2JqZWN0IHRoYXQgc3RvcmVzIGxvY2F0aW9ucyBpbiBtZW1vcnkuXG4gKi9cblxuXG5mdW5jdGlvbiBjcmVhdGVNZW1vcnlIaXN0b3J5KHByb3BzKSB7XG4gIGlmIChwcm9wcyA9PT0gdm9pZCAwKSB7XG4gICAgcHJvcHMgPSB7fTtcbiAgfVxuXG4gIHZhciBfcHJvcHMgPSBwcm9wcyxcbiAgICAgIGdldFVzZXJDb25maXJtYXRpb24gPSBfcHJvcHMuZ2V0VXNlckNvbmZpcm1hdGlvbixcbiAgICAgIF9wcm9wcyRpbml0aWFsRW50cmllcyA9IF9wcm9wcy5pbml0aWFsRW50cmllcyxcbiAgICAgIGluaXRpYWxFbnRyaWVzID0gX3Byb3BzJGluaXRpYWxFbnRyaWVzID09PSB2b2lkIDAgPyBbJy8nXSA6IF9wcm9wcyRpbml0aWFsRW50cmllcyxcbiAgICAgIF9wcm9wcyRpbml0aWFsSW5kZXggPSBfcHJvcHMuaW5pdGlhbEluZGV4LFxuICAgICAgaW5pdGlhbEluZGV4ID0gX3Byb3BzJGluaXRpYWxJbmRleCA9PT0gdm9pZCAwID8gMCA6IF9wcm9wcyRpbml0aWFsSW5kZXgsXG4gICAgICBfcHJvcHMka2V5TGVuZ3RoID0gX3Byb3BzLmtleUxlbmd0aCxcbiAgICAgIGtleUxlbmd0aCA9IF9wcm9wcyRrZXlMZW5ndGggPT09IHZvaWQgMCA/IDYgOiBfcHJvcHMka2V5TGVuZ3RoO1xuICB2YXIgdHJhbnNpdGlvbk1hbmFnZXIgPSBjcmVhdGVUcmFuc2l0aW9uTWFuYWdlcigpO1xuXG4gIGZ1bmN0aW9uIHNldFN0YXRlKG5leHRTdGF0ZSkge1xuICAgIF9leHRlbmRzKGhpc3RvcnksIG5leHRTdGF0ZSk7XG5cbiAgICBoaXN0b3J5Lmxlbmd0aCA9IGhpc3RvcnkuZW50cmllcy5sZW5ndGg7XG4gICAgdHJhbnNpdGlvbk1hbmFnZXIubm90aWZ5TGlzdGVuZXJzKGhpc3RvcnkubG9jYXRpb24sIGhpc3RvcnkuYWN0aW9uKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZUtleSgpIHtcbiAgICByZXR1cm4gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIGtleUxlbmd0aCk7XG4gIH1cblxuICB2YXIgaW5kZXggPSBjbGFtcChpbml0aWFsSW5kZXgsIDAsIGluaXRpYWxFbnRyaWVzLmxlbmd0aCAtIDEpO1xuICB2YXIgZW50cmllcyA9IGluaXRpYWxFbnRyaWVzLm1hcChmdW5jdGlvbiAoZW50cnkpIHtcbiAgICByZXR1cm4gdHlwZW9mIGVudHJ5ID09PSAnc3RyaW5nJyA/IGNyZWF0ZUxvY2F0aW9uKGVudHJ5LCB1bmRlZmluZWQsIGNyZWF0ZUtleSgpKSA6IGNyZWF0ZUxvY2F0aW9uKGVudHJ5LCB1bmRlZmluZWQsIGVudHJ5LmtleSB8fCBjcmVhdGVLZXkoKSk7XG4gIH0pOyAvLyBQdWJsaWMgaW50ZXJmYWNlXG5cbiAgdmFyIGNyZWF0ZUhyZWYgPSBjcmVhdGVQYXRoO1xuXG4gIGZ1bmN0aW9uIHB1c2gocGF0aCwgc3RhdGUpIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgPyB3YXJuaW5nKCEodHlwZW9mIHBhdGggPT09ICdvYmplY3QnICYmIHBhdGguc3RhdGUgIT09IHVuZGVmaW5lZCAmJiBzdGF0ZSAhPT0gdW5kZWZpbmVkKSwgJ1lvdSBzaG91bGQgYXZvaWQgcHJvdmlkaW5nIGEgMm5kIHN0YXRlIGFyZ3VtZW50IHRvIHB1c2ggd2hlbiB0aGUgMXN0ICcgKyAnYXJndW1lbnQgaXMgYSBsb2NhdGlvbi1saWtlIG9iamVjdCB0aGF0IGFscmVhZHkgaGFzIHN0YXRlOyBpdCBpcyBpZ25vcmVkJykgOiB2b2lkIDA7XG4gICAgdmFyIGFjdGlvbiA9ICdQVVNIJztcbiAgICB2YXIgbG9jYXRpb24gPSBjcmVhdGVMb2NhdGlvbihwYXRoLCBzdGF0ZSwgY3JlYXRlS2V5KCksIGhpc3RvcnkubG9jYXRpb24pO1xuICAgIHRyYW5zaXRpb25NYW5hZ2VyLmNvbmZpcm1UcmFuc2l0aW9uVG8obG9jYXRpb24sIGFjdGlvbiwgZ2V0VXNlckNvbmZpcm1hdGlvbiwgZnVuY3Rpb24gKG9rKSB7XG4gICAgICBpZiAoIW9rKSByZXR1cm47XG4gICAgICB2YXIgcHJldkluZGV4ID0gaGlzdG9yeS5pbmRleDtcbiAgICAgIHZhciBuZXh0SW5kZXggPSBwcmV2SW5kZXggKyAxO1xuICAgICAgdmFyIG5leHRFbnRyaWVzID0gaGlzdG9yeS5lbnRyaWVzLnNsaWNlKDApO1xuXG4gICAgICBpZiAobmV4dEVudHJpZXMubGVuZ3RoID4gbmV4dEluZGV4KSB7XG4gICAgICAgIG5leHRFbnRyaWVzLnNwbGljZShuZXh0SW5kZXgsIG5leHRFbnRyaWVzLmxlbmd0aCAtIG5leHRJbmRleCwgbG9jYXRpb24pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV4dEVudHJpZXMucHVzaChsb2NhdGlvbik7XG4gICAgICB9XG5cbiAgICAgIHNldFN0YXRlKHtcbiAgICAgICAgYWN0aW9uOiBhY3Rpb24sXG4gICAgICAgIGxvY2F0aW9uOiBsb2NhdGlvbixcbiAgICAgICAgaW5kZXg6IG5leHRJbmRleCxcbiAgICAgICAgZW50cmllczogbmV4dEVudHJpZXNcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVwbGFjZShwYXRoLCBzdGF0ZSkge1xuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiA/IHdhcm5pbmcoISh0eXBlb2YgcGF0aCA9PT0gJ29iamVjdCcgJiYgcGF0aC5zdGF0ZSAhPT0gdW5kZWZpbmVkICYmIHN0YXRlICE9PSB1bmRlZmluZWQpLCAnWW91IHNob3VsZCBhdm9pZCBwcm92aWRpbmcgYSAybmQgc3RhdGUgYXJndW1lbnQgdG8gcmVwbGFjZSB3aGVuIHRoZSAxc3QgJyArICdhcmd1bWVudCBpcyBhIGxvY2F0aW9uLWxpa2Ugb2JqZWN0IHRoYXQgYWxyZWFkeSBoYXMgc3RhdGU7IGl0IGlzIGlnbm9yZWQnKSA6IHZvaWQgMDtcbiAgICB2YXIgYWN0aW9uID0gJ1JFUExBQ0UnO1xuICAgIHZhciBsb2NhdGlvbiA9IGNyZWF0ZUxvY2F0aW9uKHBhdGgsIHN0YXRlLCBjcmVhdGVLZXkoKSwgaGlzdG9yeS5sb2NhdGlvbik7XG4gICAgdHJhbnNpdGlvbk1hbmFnZXIuY29uZmlybVRyYW5zaXRpb25Ubyhsb2NhdGlvbiwgYWN0aW9uLCBnZXRVc2VyQ29uZmlybWF0aW9uLCBmdW5jdGlvbiAob2spIHtcbiAgICAgIGlmICghb2spIHJldHVybjtcbiAgICAgIGhpc3RvcnkuZW50cmllc1toaXN0b3J5LmluZGV4XSA9IGxvY2F0aW9uO1xuICAgICAgc2V0U3RhdGUoe1xuICAgICAgICBhY3Rpb246IGFjdGlvbixcbiAgICAgICAgbG9jYXRpb246IGxvY2F0aW9uXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdvKG4pIHtcbiAgICB2YXIgbmV4dEluZGV4ID0gY2xhbXAoaGlzdG9yeS5pbmRleCArIG4sIDAsIGhpc3RvcnkuZW50cmllcy5sZW5ndGggLSAxKTtcbiAgICB2YXIgYWN0aW9uID0gJ1BPUCc7XG4gICAgdmFyIGxvY2F0aW9uID0gaGlzdG9yeS5lbnRyaWVzW25leHRJbmRleF07XG4gICAgdHJhbnNpdGlvbk1hbmFnZXIuY29uZmlybVRyYW5zaXRpb25Ubyhsb2NhdGlvbiwgYWN0aW9uLCBnZXRVc2VyQ29uZmlybWF0aW9uLCBmdW5jdGlvbiAob2spIHtcbiAgICAgIGlmIChvaykge1xuICAgICAgICBzZXRTdGF0ZSh7XG4gICAgICAgICAgYWN0aW9uOiBhY3Rpb24sXG4gICAgICAgICAgbG9jYXRpb246IGxvY2F0aW9uLFxuICAgICAgICAgIGluZGV4OiBuZXh0SW5kZXhcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBNaW1pYyB0aGUgYmVoYXZpb3Igb2YgRE9NIGhpc3RvcmllcyBieVxuICAgICAgICAvLyBjYXVzaW5nIGEgcmVuZGVyIGFmdGVyIGEgY2FuY2VsbGVkIFBPUC5cbiAgICAgICAgc2V0U3RhdGUoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdvQmFjaygpIHtcbiAgICBnbygtMSk7XG4gIH1cblxuICBmdW5jdGlvbiBnb0ZvcndhcmQoKSB7XG4gICAgZ28oMSk7XG4gIH1cblxuICBmdW5jdGlvbiBjYW5HbyhuKSB7XG4gICAgdmFyIG5leHRJbmRleCA9IGhpc3RvcnkuaW5kZXggKyBuO1xuICAgIHJldHVybiBuZXh0SW5kZXggPj0gMCAmJiBuZXh0SW5kZXggPCBoaXN0b3J5LmVudHJpZXMubGVuZ3RoO1xuICB9XG5cbiAgZnVuY3Rpb24gYmxvY2socHJvbXB0KSB7XG4gICAgaWYgKHByb21wdCA9PT0gdm9pZCAwKSB7XG4gICAgICBwcm9tcHQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJhbnNpdGlvbk1hbmFnZXIuc2V0UHJvbXB0KHByb21wdCk7XG4gIH1cblxuICBmdW5jdGlvbiBsaXN0ZW4obGlzdGVuZXIpIHtcbiAgICByZXR1cm4gdHJhbnNpdGlvbk1hbmFnZXIuYXBwZW5kTGlzdGVuZXIobGlzdGVuZXIpO1xuICB9XG5cbiAgdmFyIGhpc3RvcnkgPSB7XG4gICAgbGVuZ3RoOiBlbnRyaWVzLmxlbmd0aCxcbiAgICBhY3Rpb246ICdQT1AnLFxuICAgIGxvY2F0aW9uOiBlbnRyaWVzW2luZGV4XSxcbiAgICBpbmRleDogaW5kZXgsXG4gICAgZW50cmllczogZW50cmllcyxcbiAgICBjcmVhdGVIcmVmOiBjcmVhdGVIcmVmLFxuICAgIHB1c2g6IHB1c2gsXG4gICAgcmVwbGFjZTogcmVwbGFjZSxcbiAgICBnbzogZ28sXG4gICAgZ29CYWNrOiBnb0JhY2ssXG4gICAgZ29Gb3J3YXJkOiBnb0ZvcndhcmQsXG4gICAgY2FuR286IGNhbkdvLFxuICAgIGJsb2NrOiBibG9jayxcbiAgICBsaXN0ZW46IGxpc3RlblxuICB9O1xuICByZXR1cm4gaGlzdG9yeTtcbn1cblxuZXhwb3J0IHsgY3JlYXRlQnJvd3Nlckhpc3RvcnksIGNyZWF0ZUhhc2hIaXN0b3J5LCBjcmVhdGVNZW1vcnlIaXN0b3J5LCBjcmVhdGVMb2NhdGlvbiwgbG9jYXRpb25zQXJlRXF1YWwsIHBhcnNlUGF0aCwgY3JlYXRlUGF0aCB9O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvaGlzdG9yeS9lc20vaGlzdG9yeS5qc1xuLy8gbW9kdWxlIGlkID0gMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfZXh0ZW5kcygpIHtcbiAgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTtcblxuICAgICAgZm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuICAgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9O1xuXG4gIHJldHVybiBfZXh0ZW5kcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufVxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2V4dGVuZHMuanNcbi8vIG1vZHVsZSBpZCA9IDNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZnVuY3Rpb24gaXNBYnNvbHV0ZShwYXRobmFtZSkge1xuICByZXR1cm4gcGF0aG5hbWUuY2hhckF0KDApID09PSAnLyc7XG59XG5cbi8vIEFib3V0IDEuNXggZmFzdGVyIHRoYW4gdGhlIHR3by1hcmcgdmVyc2lvbiBvZiBBcnJheSNzcGxpY2UoKVxuZnVuY3Rpb24gc3BsaWNlT25lKGxpc3QsIGluZGV4KSB7XG4gIGZvciAodmFyIGkgPSBpbmRleCwgayA9IGkgKyAxLCBuID0gbGlzdC5sZW5ndGg7IGsgPCBuOyBpICs9IDEsIGsgKz0gMSkge1xuICAgIGxpc3RbaV0gPSBsaXN0W2tdO1xuICB9XG5cbiAgbGlzdC5wb3AoKTtcbn1cblxuLy8gVGhpcyBpbXBsZW1lbnRhdGlvbiBpcyBiYXNlZCBoZWF2aWx5IG9uIG5vZGUncyB1cmwucGFyc2VcbmZ1bmN0aW9uIHJlc29sdmVQYXRobmFtZSh0bykge1xuICB2YXIgZnJvbSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogJyc7XG5cbiAgdmFyIHRvUGFydHMgPSB0byAmJiB0by5zcGxpdCgnLycpIHx8IFtdO1xuICB2YXIgZnJvbVBhcnRzID0gZnJvbSAmJiBmcm9tLnNwbGl0KCcvJykgfHwgW107XG5cbiAgdmFyIGlzVG9BYnMgPSB0byAmJiBpc0Fic29sdXRlKHRvKTtcbiAgdmFyIGlzRnJvbUFicyA9IGZyb20gJiYgaXNBYnNvbHV0ZShmcm9tKTtcbiAgdmFyIG11c3RFbmRBYnMgPSBpc1RvQWJzIHx8IGlzRnJvbUFicztcblxuICBpZiAodG8gJiYgaXNBYnNvbHV0ZSh0bykpIHtcbiAgICAvLyB0byBpcyBhYnNvbHV0ZVxuICAgIGZyb21QYXJ0cyA9IHRvUGFydHM7XG4gIH0gZWxzZSBpZiAodG9QYXJ0cy5sZW5ndGgpIHtcbiAgICAvLyB0byBpcyByZWxhdGl2ZSwgZHJvcCB0aGUgZmlsZW5hbWVcbiAgICBmcm9tUGFydHMucG9wKCk7XG4gICAgZnJvbVBhcnRzID0gZnJvbVBhcnRzLmNvbmNhdCh0b1BhcnRzKTtcbiAgfVxuXG4gIGlmICghZnJvbVBhcnRzLmxlbmd0aCkgcmV0dXJuICcvJztcblxuICB2YXIgaGFzVHJhaWxpbmdTbGFzaCA9IHZvaWQgMDtcbiAgaWYgKGZyb21QYXJ0cy5sZW5ndGgpIHtcbiAgICB2YXIgbGFzdCA9IGZyb21QYXJ0c1tmcm9tUGFydHMubGVuZ3RoIC0gMV07XG4gICAgaGFzVHJhaWxpbmdTbGFzaCA9IGxhc3QgPT09ICcuJyB8fCBsYXN0ID09PSAnLi4nIHx8IGxhc3QgPT09ICcnO1xuICB9IGVsc2Uge1xuICAgIGhhc1RyYWlsaW5nU2xhc2ggPSBmYWxzZTtcbiAgfVxuXG4gIHZhciB1cCA9IDA7XG4gIGZvciAodmFyIGkgPSBmcm9tUGFydHMubGVuZ3RoOyBpID49IDA7IGktLSkge1xuICAgIHZhciBwYXJ0ID0gZnJvbVBhcnRzW2ldO1xuXG4gICAgaWYgKHBhcnQgPT09ICcuJykge1xuICAgICAgc3BsaWNlT25lKGZyb21QYXJ0cywgaSk7XG4gICAgfSBlbHNlIGlmIChwYXJ0ID09PSAnLi4nKSB7XG4gICAgICBzcGxpY2VPbmUoZnJvbVBhcnRzLCBpKTtcbiAgICAgIHVwKys7XG4gICAgfSBlbHNlIGlmICh1cCkge1xuICAgICAgc3BsaWNlT25lKGZyb21QYXJ0cywgaSk7XG4gICAgICB1cC0tO1xuICAgIH1cbiAgfVxuXG4gIGlmICghbXVzdEVuZEFicykgZm9yICg7IHVwLS07IHVwKSB7XG4gICAgZnJvbVBhcnRzLnVuc2hpZnQoJy4uJyk7XG4gIH1pZiAobXVzdEVuZEFicyAmJiBmcm9tUGFydHNbMF0gIT09ICcnICYmICghZnJvbVBhcnRzWzBdIHx8ICFpc0Fic29sdXRlKGZyb21QYXJ0c1swXSkpKSBmcm9tUGFydHMudW5zaGlmdCgnJyk7XG5cbiAgdmFyIHJlc3VsdCA9IGZyb21QYXJ0cy5qb2luKCcvJyk7XG5cbiAgaWYgKGhhc1RyYWlsaW5nU2xhc2ggJiYgcmVzdWx0LnN1YnN0cigtMSkgIT09ICcvJykgcmVzdWx0ICs9ICcvJztcblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5leHBvcnQgZGVmYXVsdCByZXNvbHZlUGF0aG5hbWU7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvcmVzb2x2ZS1wYXRobmFtZS9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cbmZ1bmN0aW9uIHZhbHVlRXF1YWwoYSwgYikge1xuICBpZiAoYSA9PT0gYikgcmV0dXJuIHRydWU7XG5cbiAgaWYgKGEgPT0gbnVsbCB8fCBiID09IG51bGwpIHJldHVybiBmYWxzZTtcblxuICBpZiAoQXJyYXkuaXNBcnJheShhKSkge1xuICAgIHJldHVybiBBcnJheS5pc0FycmF5KGIpICYmIGEubGVuZ3RoID09PSBiLmxlbmd0aCAmJiBhLmV2ZXJ5KGZ1bmN0aW9uIChpdGVtLCBpbmRleCkge1xuICAgICAgcmV0dXJuIHZhbHVlRXF1YWwoaXRlbSwgYltpbmRleF0pO1xuICAgIH0pO1xuICB9XG5cbiAgdmFyIGFUeXBlID0gdHlwZW9mIGEgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKGEpO1xuICB2YXIgYlR5cGUgPSB0eXBlb2YgYiA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoYik7XG5cbiAgaWYgKGFUeXBlICE9PSBiVHlwZSkgcmV0dXJuIGZhbHNlO1xuXG4gIGlmIChhVHlwZSA9PT0gJ29iamVjdCcpIHtcbiAgICB2YXIgYVZhbHVlID0gYS52YWx1ZU9mKCk7XG4gICAgdmFyIGJWYWx1ZSA9IGIudmFsdWVPZigpO1xuXG4gICAgaWYgKGFWYWx1ZSAhPT0gYSB8fCBiVmFsdWUgIT09IGIpIHJldHVybiB2YWx1ZUVxdWFsKGFWYWx1ZSwgYlZhbHVlKTtcblxuICAgIHZhciBhS2V5cyA9IE9iamVjdC5rZXlzKGEpO1xuICAgIHZhciBiS2V5cyA9IE9iamVjdC5rZXlzKGIpO1xuXG4gICAgaWYgKGFLZXlzLmxlbmd0aCAhPT0gYktleXMubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG5cbiAgICByZXR1cm4gYUtleXMuZXZlcnkoZnVuY3Rpb24gKGtleSkge1xuICAgICAgcmV0dXJuIHZhbHVlRXF1YWwoYVtrZXldLCBiW2tleV0pO1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5leHBvcnQgZGVmYXVsdCB2YWx1ZUVxdWFsO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL3ZhbHVlLWVxdWFsL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSA1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBpc1Byb2R1Y3Rpb24gPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nO1xuZnVuY3Rpb24gd2FybmluZyhjb25kaXRpb24sIG1lc3NhZ2UpIHtcbiAgaWYgKCFpc1Byb2R1Y3Rpb24pIHtcbiAgICBpZiAoY29uZGl0aW9uKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHRleHQgPSBcIldhcm5pbmc6IFwiICsgbWVzc2FnZTtcblxuICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnNvbGUud2Fybih0ZXh0KTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgdGhyb3cgRXJyb3IodGV4dCk7XG4gICAgfSBjYXRjaCAoeCkge31cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCB3YXJuaW5nO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvdGlueS13YXJuaW5nL2Rpc3QvdGlueS13YXJuaW5nLmVzbS5qc1xuLy8gbW9kdWxlIGlkID0gNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgaXNQcm9kdWN0aW9uID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJztcbnZhciBwcmVmaXggPSAnSW52YXJpYW50IGZhaWxlZCc7XG5mdW5jdGlvbiBpbnZhcmlhbnQoY29uZGl0aW9uLCBtZXNzYWdlKSB7XG4gIGlmIChjb25kaXRpb24pIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoaXNQcm9kdWN0aW9uKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKHByZWZpeCk7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKHByZWZpeCArIFwiOiBcIiArIChtZXNzYWdlIHx8ICcnKSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgaW52YXJpYW50O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvdGlueS1pbnZhcmlhbnQvZGlzdC90aW55LWludmFyaWFudC5lc20uanNcbi8vIG1vZHVsZSBpZCA9IDdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcblx0dHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCkgOlxuXHR0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoZmFjdG9yeSkgOlxuXHQoZ2xvYmFsLnVybENvbXBvc2VyID0gZmFjdG9yeSgpKTtcbn0odGhpcywgKGZ1bmN0aW9uICgpIHsgJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIEBtb2R1bGUgdXJsLWNvbXBvc2VyXG4gKiBAZGVzY3JpcHRpb24gTW9kdWxlIHRvIGJ1aWxkIGR5bmFtaWMgVVJMcyB3aXRob3V0IGEgZnVzc1xuICovXG5cbi8vXG4vLyBQYXRoIGFuYWx5c2lzIHJlZ3VsYXIgZXhwcmVzc2lvbnNcbi8vXG5cbi8qKlxuICogVHJhaWxpbmcgc2xhc2ggcmVndWxhciBleHByZXNzaW9uXG4gKiBAcHJpdmF0ZVxuICovXG52YXIgVFJBSUxJTkdfU0xBU0ggPSAvXFwvJC87XG4vKipcbiAqIExlYWRpbmcgc2xhc2ggcmVndWxhciBleHByZXNzaW9uXG4gKiBAcHJpdmF0ZVxuICovXG52YXIgTEVBRElOR19TTEFTSCA9IC9eXFwvLztcbi8qKlxuICogUGFyZW50aGVzZXMgZ2xvYmFsIHJlZ3VsYXIgZXhwcmVzc2lvblxuICogQHByaXZhdGVcbiAqL1xudmFyIFBBUkVOVEhFU0VTID0gL1soKV0vZztcbi8qKlxuICogT3B0aW9uYWwgcGFyYW1ldGVycyBnbG9iYWwgcmVndWxhciBleHByZXNzaW9uXG4gKiBAcHJpdmF0ZVxuICovXG52YXIgT1BUSU9OQUxfUEFSQU1TID0gL1xcKCguKj8pXFwpL2c7XG4vKipcbiAqIFNwbGF0IHBhcmFtZXRlcnMgZ2xvYmFsIHJlZ3VsYXIgZXhwcmVzc2lvblxuICogQHByaXZhdGVcbiAqL1xudmFyIFNQTEFUX1BBUkFNUyA9IC9cXCpcXHcrL2c7XG4vKipcbiAqIE5hbWVkIHBhcmFtZXRlciByZWd1bGFyIGV4cHJlc3Npb25cbiAqIEBwcml2YXRlXG4gKi9cbnZhciBOQU1FRF9QQVJBTSA9IC8oXFwoXFw/KT86XFx3Ky87XG4vKipcbiAqIE5hbWVkIHBhcmFtZXRlcnMgZ2xvYmFsIHJlZ3VsYXIgZXhwcmVzc2lvblxuICogQHByaXZhdGVcbiAqL1xudmFyIE5BTUVEX1BBUkFNUyA9IC8oXFwoXFw/KT86XFx3Ky9nO1xuLyoqXG4gKiBTb21lIHdpZXJkIGVzY2FwZSByZWd1bGFyIGV4cHJlc3Npb25cbiAqIEBwcml2YXRlXG4gKi9cbnZhciBFU0NBUEUgPSAvWy17fVtcXF0rPy4sXFxcXF4kfCNcXHNdL2c7XG5cbi8vXG4vLyBIZWxwZXIgZnVuY3Rpb25zXG4vL1xuXG4vKipcbiAqIENoZWNrcyBpZiBhIGdpdmVuIG9iamVjdCBpcyBhbiBhcnJheVxuICpcbiAqIEBwcml2YXRlXG4gKlxuICogQHBhcmFtICB7bWl4ZWR9IG9iaiBUaGUgb2JqZWN0IHRvIGNoZWNrXG4gKiBAcmV0dXJuIHtib29sZWFufSAgIGB0cnVlYCBpZiBgb2JqYCBpcyBhbiBhcnJheSBlbHNlIGBmYWxzZWBcbiAqL1xuZnVuY3Rpb24gaXNBcnJheSAob2JqKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqKSA9PT0gJ1tvYmplY3QgQXJyYXldJ1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGEgZ2l2ZW4gb2JqZWN0IGlzIGVtcHR5XG4gKlxuICogQHByaXZhdGVcbiAqXG4gKiBAcGFyYW0gIHtvYmplY3R9IG9iaiBUaGUgb2JqZWN0IHRvIGNoZWNrXG4gKiBAcmV0dXJuIHtib29sZWFufSAgICBgdHJ1ZWAgaWYgYG9iamAgaXMgZW1wdHkgZWxzZSBgZmFsc2VgXG4gKi9cbmZ1bmN0aW9uIGlzRW1wdHkgKG9iaikge1xuICBpZiAob2JqID09IG51bGwpIHsgcmV0dXJuIHRydWUgfVxuICBpZiAob2JqLmxlbmd0aCA+IDApIHsgcmV0dXJuIGZhbHNlIH1cbiAgaWYgKG9iai5sZW5ndGggPT09IDApIHsgcmV0dXJuIHRydWUgfVxuICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcpIHsgcmV0dXJuIHRydWUgfVxuXG4gIGZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHsgcmV0dXJuIGZhbHNlIH1cbiAgfVxuXG4gIHJldHVybiB0cnVlXG59XG5cbi8vXG4vLyAjIyBQYXRoIHBhcnNpbmcgZnVuY3Rpb25zXG4vL1xuXG4vKipcbiAqIEluamVjdCBhcmd1bWVudHMgaW50byBhIGR5bmFtaWMgcGF0aCBkZWZpbml0aW9uIGFuZCBjbGVhbiB1bnVzZWQgb3B0aW9uYWwgcGFydHNcbiAqXG4gKiBAcHJpdmF0ZVxuICpcbiAqIEBwYXJhbSAge3N0cmluZ30gcGF0aCBUaGUgZHluYW1pYyBwYXRoIGRlZmluaXRpb25cbiAqIEBwYXJhbSAge21peGVkfSAgYXJncyBPYmplY3Qgb3IgYXJyYXkgb2YgYXJndW1lbnRzIHRvIGluamVjdC5cbiAqICAgICAgICAgICAgICAgICAgICAgICBJZiBpdCBpcyBhbiBhcnJheSwgYXJndW1lbnRzIHdpbGwgYmUgaW5qZWN0ZWQgaW4gc2VxdWVudGlhbCBvcmRlci5cbiAqICAgICAgICAgICAgICAgICAgICAgICBGb3IgYW4gb2JqZWN0LCB0aGUgb2JqZWN0IGtleXMgd2lsbCBiZSB1c2VkIHRvIG1hcCB2YWx1ZXMgdG8gdGhlIGR5bmFtaWMgcGFydHMgb2YgdGhlIHBhdGguXG4gKiBAcmV0dXJuIHtzdHJpbmd9ICAgICAgVGhlIHBhcnNlZCBwYXRoIHdpdGggaW5qZWN0ZWQgYXJndW1lbnRzXG4gKi9cbmZ1bmN0aW9uIGNvbXBvc2VQYXRoIChwYXRoLCBhcmdzKSB7XG4gIHBhdGggPSBwYXRoIHx8ICcnO1xuICBhcmdzID0gYXJncyB8fCBbXTtcblxuICBpZiAoaXNFbXB0eShhcmdzKSkge1xuICAgIHJldHVybiByZW1vdmVPcHRpb25hbFBhcmFtcyhwYXRoKVxuICB9XG5cbiAgcGF0aCA9IHJlcGxhY2VBcmdzKHBhdGgsIGFyZ3MpO1xuXG4gIHJldHVybiByZW1vdmVUcmFpbGluZ1NsYXNoKFxuICAgIHJlbW92ZVBhcmVudGhlc2VzKHBhdGgpXG4gIClcbn1cblxuLyoqXG4gKiBSZXBsYWNlIGR5bmFtaWMgcGFydHMgb2YgYSBwYXRoIGJ5IGdpdmVuIHZhbHVlc1xuICpcbiAqIEBwcml2YXRlXG4gKlxuICogQHBhcmFtICB7c3RyaW5nfSBwYXRoIFRoZSBkeW5hbWljIHBhdGggZGVmaW5pdGlvblxuICogQHBhcmFtICB7bWl4ZWR9ICBhcmdzIE9iamVjdCBvciBhcnJheSBvZiBhcmd1bWVudHMgdG8gaW5qZWN0LlxuICogICAgICAgICAgICAgICAgICAgICAgIElmIGl0IGlzIGFuIGFycmF5LCBhcmd1bWVudHMgd2lsbCBiZSBpbmplY3RlZCBpbiBzZXF1ZW50aWFsIG9yZGVyLlxuICogICAgICAgICAgICAgICAgICAgICAgIEZvciBhbiBvYmplY3QsIHRoZSBvYmplY3Qga2V5cyB3aWxsIGJlIHVzZWQgdG8gbWFwIHZhbHVlcyB0byB0aGUgZHluYW1pYyBwYXJ0cyBvZiB0aGUgcGF0aC5cbiAqIEByZXR1cm4ge3N0cmluZ30gICAgICBQYXRoIHdpdGggaW5qZWN0ZWQgYXJndW1lbnRzXG4gKi9cbmZ1bmN0aW9uIHJlcGxhY2VBcmdzIChwYXRoLCBhcmdzKSB7XG4gIGFyZ3MgPSBhcmdzIHx8IFtdO1xuXG4gIGlmICghaXNBcnJheShhcmdzKSkge1xuICAgIHZhciBwYXJhbU5hbWVzID0gcGF0aC5tYXRjaChOQU1FRF9QQVJBTVMpO1xuICAgIGlmIChwYXJhbU5hbWVzKSB7XG4gICAgICBhcmdzID0gcGFyYW1OYW1lcy5tYXAoZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIGFyZ3NbbmFtZS5zdWJzdHIoMSldOyB9KTtcbiAgICB9XG4gIH1cblxuICBpZiAoaXNBcnJheShhcmdzKSkge1xuICAgIGFyZ3MuZm9yRWFjaChmdW5jdGlvbiAoYXJnKSB7XG4gICAgICBpZiAoYXJnKSB7IHBhdGggPSByZXBsYWNlQXJnKHBhdGgsIGFyZyk7IH1cbiAgICB9KTtcbiAgfVxuXG4gIHZhciBtYXRjaGVzID0gcGF0aC5tYXRjaChPUFRJT05BTF9QQVJBTVMpO1xuXG4gIGlmIChtYXRjaGVzKSB7XG4gICAgbWF0Y2hlcy5mb3JFYWNoKGZ1bmN0aW9uIChwYXJ0KSB7XG4gICAgICBpZiAoaXNOYW1lZE9yU3BsYXRQYXJhbShwYXJ0KSkge1xuICAgICAgICBwYXRoID0gcGF0aC5yZXBsYWNlKHBhcnQsICcnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBwYXRoXG59XG5cbi8qKlxuICogUmVwbGFjZSB0aGUgZmlyc3QgbWF0Y2hpbmcgZHluYW1pYyBwYXJ0IG9mIGEgcGF0aCBieSB0aGUgZ2l2ZW4gYXJndW1lbnRcbiAqXG4gKiBAcHJpdmF0ZVxuICpcbiAqIEBwYXJhbSAge3N0cmluZ30gcGF0aCBUaGUgZHluYW1pYyBwYXRoIGRlZmluaXRpb25cbiAqIEBwYXJhbSAge21peGVkfSAgYXJnICBUaGUgdmFsdWUgdG8gaW5qZWN0XG4gKiBAcmV0dXJuIHtzdHJpbmd9ICAgICAgVGhlIG1vZGlmaWVkIHBhdGhcbiAqL1xuZnVuY3Rpb24gcmVwbGFjZUFyZyAocGF0aCwgYXJnKSB7XG4gIHZhciBoYXNOYW1lZFBhcmFtID0gcGF0aC5pbmRleE9mKCc6JykgIT09IC0xO1xuICBhcmcgPSBlbmNvZGVVUklDb21wb25lbnQoYXJnKTtcblxuICBpZiAoaGFzTmFtZWRQYXJhbSkge1xuICAgIHJldHVybiBwYXRoLnJlcGxhY2UoTkFNRURfUEFSQU0sIGFyZylcbiAgfVxuXG4gIHJldHVybiBwYXRoLnJlcGxhY2UoU1BMQVRfUEFSQU1TLCBhcmcpXG59XG5cbi8qKlxuICogQ2hlY2sgaWYgdGhlIG5leHQgZHluYW1pYyBwYXJ0IGluIGEgcGF0aCBpcyBhIG5hbWVkIG9yIHNwbGF0IHBhcmFtZXRlciBkZWZpbml0aW9uXG4gKlxuICogQHByaXZhdGVcbiAqXG4gKiBAcGFyYW0gIHtzdHJpbmd9IHBhcmFtIER5bmFtaWMgcGFydCBvZiBhIGR5bmFtaWMgcGF0aCBkZWZpbml0aW9uXG4gKiBAcmV0dXJuIHtib29sZWFufSAgICAgIGB0cnVlYCBpZiBgcGFyYW1gIGlzIGEgbmFtZWQgb3Igc3BsYXQgcGFyYW1ldGVyIGVsc2UgYGZhbHNlYFxuICovXG5mdW5jdGlvbiBpc05hbWVkT3JTcGxhdFBhcmFtIChwYXJhbSkge1xuICByZXR1cm4gTkFNRURfUEFSQU0udGVzdChwYXJhbSkgfHwgU1BMQVRfUEFSQU1TLnRlc3QocGFyYW0pXG59XG5cbi8qKlxuICogU3RyaXAgdGhlIHVuZmlsbGVkIG9wdGlvbmFsIHBhcmFtZXRlcnMgZnJvbSBhIGR5bmFtaWMgcGF0aCBkZWZpbml0aW9uXG4gKlxuICogQHByaXZhdGVcbiAqXG4gKiBAcGFyYW0gIHtzdHJpbmd9IHBhdGggVGhlIGR5bmFtaWMgcGF0aCB0byBtb2RpZnlcbiAqIEByZXR1cm4ge3N0cmluZ30gICAgICBUaGUgbW9kaWZpZWQgcGF0aFxuICovXG5mdW5jdGlvbiByZW1vdmVPcHRpb25hbFBhcmFtcyAocGF0aCkge1xuICByZXR1cm4gcGF0aC5yZXBsYWNlKE9QVElPTkFMX1BBUkFNUywgJycpXG59XG5cbi8qKlxuICogUmVtb3ZlIHRoZSBsYXN0IGNoYXJhY3RlciBmcm9tIGEgcGF0aCBpZiBpdCBpcyBhIHNsYXNoXG4gKlxuICogQHByaXZhdGVcbiAqXG4gKiBAcGFyYW0gIHtzdHJpbmd9IHBhdGggVGhlIHBhdGggdG8gbW9kaWZ5XG4gKiBAcmV0dXJuIHtzdHJpbmd9ICAgICAgVGhlIG1vZGlmaWVkIHBhdGhcbiAqL1xuZnVuY3Rpb24gcmVtb3ZlVHJhaWxpbmdTbGFzaCAocGF0aCkge1xuICByZXR1cm4gcGF0aC5yZXBsYWNlKFRSQUlMSU5HX1NMQVNILCAnJylcbn1cblxuLyoqXG4gKiBSZW1vdmUgdGhlIGZpcnN0IGNoYXJhY3RlciBmcm9tIGEgcGF0aCBpZiBpdCBpcyBhIHNsYXNoXG4gKlxuICogQHByaXZhdGVcbiAqXG4gKiBAcGFyYW0gIHtzdHJpbmd9IHBhdGggVGhlIHBhdGggdG8gbW9kaWZ5XG4gKiBAcmV0dXJuIHtzdHJpbmd9ICAgICAgVGhlIG1vZGlmaWVkIHBhdGhcbiAqL1xuZnVuY3Rpb24gcmVtb3ZlTGVhZGluZ1NsYXNoIChwYXRoKSB7XG4gIHJldHVybiBwYXRoLnJlcGxhY2UoTEVBRElOR19TTEFTSCwgJycpXG59XG5cbi8qKlxuICogUmVtb3ZlL2NsZWFuIHJlbWFpbmluZyBwYXJlbnRoZXNlcyBmcm9tIGEgcGF0aCBhZnRlciBpdCBoYXMgYmVlbiBwYXJzZWRcbiAqXG4gKiBAcHJpdmF0ZVxuICpcbiAqIEBwYXJhbSAge3N0cmluZ30gcGF0aCBUaGUgcGF0aCB0byBtb2RpZnkvY2xlYW5cbiAqIEByZXR1cm4ge3N0cmluZ30gICAgICBUaGUgbW9kaWZpZWQgcGF0aFxuICovXG5mdW5jdGlvbiByZW1vdmVQYXJlbnRoZXNlcyAocGF0aCkge1xuICByZXR1cm4gcGF0aC5yZXBsYWNlKFBBUkVOVEhFU0VTLCAnJylcbn1cblxuLyoqXG4gKiBTbWFydCBjb25jYXRlbmF0aW9uIG9mIGhvc3QsIHBhdGgsIHF1ZXJ5IGFuZCBoYXNoLiBXaWxsIGFkZCB0aGUgY29ycmVjdCBnbHVlIGNoYXJhY3RlciB3aGVuIG5lZWRlZFxuICpcbiAqIEBwcml2YXRlXG4gKlxuICogQHBhcmFtICB7b2JqZWN0fSBvcHRpb25zIE9iamVjdCBkZXNjcmliaW5nIHRoZSB1cmxcbiAqIEByZXR1cm4ge3N0cmluZ30gICAgICAgICBDb25jYXRlbmF0aW9uIG9mIGhvc3QsIHBhdGgsIHF1ZXJ5IGFuZCBoYXNoXG4gKi9cbmZ1bmN0aW9uIHNtYXJ0Q29uY2F0IChyZWYpIHtcbiAgdmFyIGhvc3QgPSByZWYuaG9zdDtcbiAgdmFyIHBhdGggPSByZWYucGF0aDtcbiAgdmFyIHF1ZXJ5ID0gcmVmLnF1ZXJ5O1xuICB2YXIgaGFzaCA9IHJlZi5oYXNoO1xuXG4gIC8vIE5vcm1hbGl6ZSBob3N0XG4gIGhvc3QgPSByZW1vdmVUcmFpbGluZ1NsYXNoKGhvc3QpO1xuXG4gIC8vIFNwbGl0IHBhdGggaW4gY2FzZSBwYXRoIGNvbnRhaW5zIGFuIGV4aXN0aW5nIHF1ZXJ5XG4gIHZhciByZWYkMSA9IHBhdGguc3BsaXQoJz8nKTtcbiAgdmFyIHBhdGhQYXJ0ID0gcmVmJDFbMF07XG4gIHZhciBxdWVyeVBhcnQgPSByZWYkMVsxXTtcblxuICAvLyBOb3JtYWxpemUgcGF0aFxuICBwYXRoID0gcmVtb3ZlVHJhaWxpbmdTbGFzaChcbiAgICByZW1vdmVMZWFkaW5nU2xhc2gocGF0aFBhcnQpXG4gICk7XG5cbiAgLy8gQWRkIHNwZWNpZmljIGdsdWUgY2hhcmFjdGVyc1xuICBwYXRoID0gcGF0aCA/IChcIi9cIiArIHBhdGgpIDogJyc7XG4gIHF1ZXJ5UGFydCA9IHF1ZXJ5UGFydCA/IChxdWVyeVBhcnQgKyBcIiZcIikgOiAnJztcbiAgcXVlcnkgPSBxdWVyeSA/IChcIj9cIiArIHF1ZXJ5UGFydCArIHF1ZXJ5KSA6ICcnO1xuICBoYXNoID0gaGFzaCA/IChcIiNcIiArIGhhc2gpIDogJyc7XG5cbiAgcmV0dXJuIChcIlwiICsgaG9zdCArIHBhdGggKyBxdWVyeSArIGhhc2gpXG59XG5cbi8qKlxuICogVGVzdCB0aGUgZXhpc3RlbmNlIG9mIGNlcnRhaW4gZmllbGRzIGluIHRoZSBzdGF0c1xuICpcbiAqIEBwcml2YXRlXG4gKlxuICogQHBhcmFtICB7YXJyYXl9ICBwYXJhbXMgTGlzdCBvZiBhbmFseXplZCBwYXJhbWV0ZXJzXG4gKiBAcGFyYW0gIHtzdHJpbmd9IGZpZWxkICBOYW1lIG9mIHRoZSBmaWVsZCB0byBhbmFseXplXG4gKiBAcmV0dXJuIHthcnJheX0gICAgICAgICBGaWx0ZXJlZCBhcnJheVxuICovXG5mdW5jdGlvbiB0ZXN0UGFyYW1ldGVyIChwYXJhbXMsIGZpZWxkKSB7XG4gIHZhciByZXN1bHQgPSBbXTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHBhcmFtcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBwID0gcGFyYW1zW2ldO1xuICAgIGlmIChwW2ZpZWxkXSAmJiBwLnZhbHVlID09PSAnJykge1xuICAgICAgcmVzdWx0LnB1c2gocCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdFxufVxuXG4vL1xuLy8gIyMgUHVibGljIEFQSSBmdW5jdGlvbnNcbi8vXG5cbi8qKlxuICogUmV0cmlldmUgbWF0Y2hlcyBmb3IgbmFtZWQgYW5kIHNwbGF0IHBhcmFtcyBmb3IgYSBkeW5hbWljIHBhdGggZGVmaW5pdGlvblxuICpcbiAqIEBuYW1lIG1hdGNoXG4gKiBAZnVuY3Rpb25cbiAqIEBwdWJsaWNcbiAqXG4gKiBAcGFyYW0gIHtzdHJpbmd9IHBhdGggRHluYW1pYyBwYXRoIGRlZmluaXRpb25cbiAqIEByZXR1cm4ge29iamVjdH0gICAgICBPYmplY3Qgd2l0aCBhIGBuYW1lZGAgYW5kIGBzcGxhdGAgYXJyYXkgY29udGFpbmluZyB0aGUgZXh0cmFjdGVkIHBhcmFtZXRlciBuYW1lc1xuICovXG5mdW5jdGlvbiBnZXRQYXJhbXNNYXRjaCAocGF0aCkge1xuICByZXR1cm4ge1xuICAgIG5hbWVkOiAocGF0aCAmJiBwYXRoLm1hdGNoKE5BTUVEX1BBUkFNUykpIHx8IFtdLFxuICAgIHNwbGF0OiAocGF0aCAmJiBwYXRoLm1hdGNoKFNQTEFUX1BBUkFNUykpIHx8IFtdXG4gIH1cbn1cblxuLyoqXG4gKiBUcmFuc2Zvcm0gYSBkeW5hbWljIHBhdGggZGVmaW5pdGlvbiB0byBhbiBleGVjdXRhYmxlIHJlZ3VsYXIgZXhwcmVzc2lvblxuICpcbiAqIEBuYW1lIHJlZ2V4XG4gKiBAZnVuY3Rpb25cbiAqIEBwdWJsaWNcbiAqXG4gKiBAcGFyYW0gIHtzdHJpbmd9IHJvdXRlIFRoZSByb3V0ZS9wYXRoIHRvIHRyYW5zZm9ybVxuICogQHJldHVybiB7UmVnRXhwfSAgICAgICBUaGUgcmVzdWx0aW5nIHJlZ3VsYXIgZXhwcmVzc2lvbiBpbnN0YW5jZVxuICovXG5mdW5jdGlvbiByb3V0ZVRvUmVnZXggKHJvdXRlKSB7XG4gIHJvdXRlID0gcm91dGUucmVwbGFjZShFU0NBUEUsICdcXFxcJCYnKVxuICAgIC5yZXBsYWNlKE9QVElPTkFMX1BBUkFNUywgJyg/OiQxKT8nKVxuICAgIC5yZXBsYWNlKE5BTUVEX1BBUkFNUywgZnVuY3Rpb24gKG1hdGNoLCBvcHRpb25hbCkgeyByZXR1cm4gb3B0aW9uYWwgPyBtYXRjaCA6ICcoW14vP10rKSc7IH0pXG4gICAgLnJlcGxhY2UoU1BMQVRfUEFSQU1TLCAnKFteP10qPyknKTtcblxuICByZXR1cm4gbmV3IFJlZ0V4cCgnXicgKyByb3V0ZSArICcoPzpcXFxcPyhbXFxcXHNcXFxcU10qKSk/JCcpXG59XG5cbi8qKlxuICogQnVpbGQgdGhlIHBhdGggcGFydCBvZiBhIFVSTCB1c2luZyBkeW5hbWljIHBhdGggZGVmaW5pdGlvbnNcbiAqXG4gKiBAbmFtZSBwYXRoXG4gKiBAZnVuY3Rpb25cbiAqIEBwdWJsaWNcbiAqXG4gKiBAcGFyYW0gIHtvYmplY3R9IG9wdGlvbnMgQW4gb2JqZWN0IGNvbnRhaW5pbmcgYHBhdGhgIGFuZCBgcGFyYW1zYCBrZXlzIHdoaWNoIHdpbGwgYmUgdXNlZCB0byBidWlsZCB0aGUgcmVzdWx0aW5nIHBhdGguXG4gKiBAcmV0dXJuIHtzdHJpbmd9ICAgICAgICAgVGhlIGJ1aWx0IHBhdGhcbiAqL1xuZnVuY3Rpb24gYnVpbGRQYXRoIChvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gIHJldHVybiBjb21wb3NlUGF0aChvcHRpb25zLnBhdGgsIG9wdGlvbnMucGFyYW1zKVxufVxuXG4vKipcbiAqIEJ1aWxkIHRoZSBxdWVyeSBwYXJ0IG9mIGEgVVJMXG4gKlxuICogQG5hbWUgcXVlcnlcbiAqIEBmdW5jdGlvblxuICogQHB1YmxpY1xuICpcbiAqIEBwYXJhbSAge29iamVjdH0gb3B0aW9ucyBBbiBvYmplY3QgY29udGFpbmluZyBhIGBxdWVyeWAga2V5LiBUaGUgYGtleWAgc2hvdWxkIGJlIGFuIG9iamVjdCBvZiBrZXkvdmFsdWUgcGFpcnMgdGhhdFxuICogICAgICAgICAgICAgICAgICAgICAgICAgIHdpbGwgYmUgY29udmVydGVkIHRvIGEgVVJMIHF1ZXJ5IHN0cmluZy5cbiAqIEByZXR1cm4ge3N0cmluZ30gICAgICAgICBFbmNvZGVkIFVSTCBxdWVyeSBzdHJpbmdcbiAqL1xuZnVuY3Rpb24gYnVpbGRRdWVyeSAob3B0aW9ucykge1xuICB2YXIgcXVlcnkgPSBbXTtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgZm9yICh2YXIga2V5IGluIG9wdGlvbnMucXVlcnkpIHtcbiAgICB2YXIgcGFyYW0gPSBvcHRpb25zLnF1ZXJ5W2tleV07XG4gICAgcXVlcnkucHVzaCgoa2V5ICsgXCI9XCIgKyAoZW5jb2RlVVJJQ29tcG9uZW50KHBhcmFtKSkpKTtcbiAgfVxuXG4gIHJldHVybiBxdWVyeS5sZW5ndGggPyBxdWVyeS5qb2luKCcmJykgOiAnJ1xufVxuXG4vKipcbiAqIFRlc3QgYSBVUkwgYWdhaW5zdCBhIGR5bmFtaWMgcGF0aCBkZWZpbml0aW9uXG4gKlxuICogQHB1YmxpY1xuICpcbiAqIEBwYXJhbSAge29iamVjdH0gb3B0aW9ucyBBbiBvYmplY3Qgd2l0aCBgcGF0aGAgYW5kIGB1cmxgIGtleXMuXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgVGhlIGBwYXRoYCBpcyB0aGUgZHluYW1pYyBwYXRoIGRlZmluaXRpb24gYWdhaW5zdCB3aGljaCB0aGUgYHVybGAgd2lsbCBiZSB0ZXN0ZWRcbiAqIEByZXR1cm4ge2Jvb2xlYW59ICAgICAgICBgdHJ1ZWAgaWYgYHVybGAgbWF0Y2hlcyB0aGUgYHBhdGhgIGVsc2UgYGZhbHNlYFxuICovXG5mdW5jdGlvbiB0ZXN0IChvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gIHZhciByZSA9IHJvdXRlVG9SZWdleChvcHRpb25zLnBhdGgpO1xuXG4gIHJldHVybiByZS50ZXN0KG9wdGlvbnMudXJsKVxufVxuXG4vKipcbiAqIEJ1aWxkIGEgY29tcGxldGUgVVJMXG4gKlxuICogQHB1YmxpY1xuICpcbiAqIEBwYXJhbSAge29iamVjdH0gb3B0aW9ucyBBbiBvYmplY3QgY29udGFpbmluZyBgaG9zdGAsIGBwYXRoYCwgYHBhcmFtc2AsIGBxdWVyeWAgYW5kIGBoYXNoYC5cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICBFdmVyeXRoaW5nIGlzIG9wdGlvbmFsLCBjYWxsaW5nIGBidWlsZGAgd2l0aG91dCBhbnkgcGFyYW1ldGVycyB3aWxsIGp1c3QgcmV0dXJuIGFuIGVtcHR5IHN0cmluZy5cbiAqIEByZXR1cm4ge3N0cmluZ30gICAgICAgICBUaGUgYnVpbHQgVVJMXG4gKi9cbmZ1bmN0aW9uIGJ1aWxkIChvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICBvcHRpb25zLmhvc3QgPSBvcHRpb25zLmhvc3QgfHwgJyc7XG5cbiAgdmFyIHBhdGggPSBidWlsZFBhdGgob3B0aW9ucyk7XG4gIHZhciBxdWVyeSA9IGJ1aWxkUXVlcnkob3B0aW9ucyk7XG5cbiAgcmV0dXJuIHNtYXJ0Q29uY2F0KHsgaG9zdDogb3B0aW9ucy5ob3N0LCBwYXRoOiBwYXRoLCBxdWVyeTogcXVlcnksIGhhc2g6IG9wdGlvbnMuaGFzaCB9KVxufVxuXG4vKipcbiAqIFRyYW5zZm9ybSBhbiBhcmd1bWVudHMgYXJyYXkgaW50byBhbiBvYmplY3QgdXNpbmcgdGhlIGR5bmFtaWMgcGF0aCBkZWZpbml0aW9uXG4gKlxuICogQG5hbWUgcGFyYW1zXG4gKiBAZnVuY3Rpb25cbiAqIEBwdWJsaWNcbiAqXG4gKiBAcGFyYW0gIHtzdHJpbmd9IHBhdGggVGhlIGR5bmFtaWMgcGF0aCBkZWZpbml0aW9uXG4gKiBAcGFyYW0gIHthcnJheX0gIGFyZ3MgQXJndW1lbnRzIGFycmF5XG4gKiBAcmV0dXJuIHtvYmplY3R9ICAgICAgVGhlIHJlc3VsdGluZyBrZXkvdmFsdWUgcGFpcnNcbiAqL1xuZnVuY3Rpb24gcGFyYW1zQXJyYXkyT2JqZWN0IChwYXRoLCBhcmdzKSB7XG4gIHZhciByZXN1bHQgPSB7fTtcbiAgdmFyIHBhcmFtcyA9IGdldFBhcmFtc01hdGNoKHBhdGgpO1xuXG4gIHZhciBpID0gMDtcblxuICBwYXJhbXMubmFtZWQuZm9yRWFjaChjb21wb3NlKTtcbiAgcGFyYW1zLnNwbGF0LmZvckVhY2goY29tcG9zZSk7XG5cbiAgcmV0dXJuIHJlc3VsdFxuXG4gIC8vIEhlbHBlclxuXG4gIGZ1bmN0aW9uIGNvbXBvc2UgKG5hbWUpIHtcbiAgICByZXN1bHRbbmFtZS5zbGljZSgxKV0gPSBhcmdzW2krK107XG4gIH1cbn1cblxuLyoqXG4gKiBHZW5lcmF0ZSBzdGF0cyBhYm91dCBhIHBhdGhcbiAqXG4gKiBAcHVibGljXG4gKlxuICogQHBhcmFtICB7c3RyaW5nfSBwYXRoIER5bmFtaWMgcGF0aCBkZWZpbml0aW9uXG4gKiBAcGFyYW0gIHtvYmplY3R9IGFyZ3MgT2JqZWN0IG9mIGFyZ3VtZW50cyB0byBhbmFseXplIHRoZSBzdGF0ZSBvZiBwYXRoIGlmIGl0IHdhcyBpbmplY3RlZCB3aXRoIHRoZSBnaXZlbiBwYXJhbWV0ZXJzXG4gKiBAcmV0dXJuIHtvYmplY3R9ICAgICAgT2JqZWN0IGNvbnRhaW5pbmcgZGlmZmVyZW50IHN0YXRzIGFib3V0IHRoZSBwYXRoXG4gKi9cbmZ1bmN0aW9uIHN0YXRzIChwYXRoLCBhcmdzKSB7XG4gIHZhciBvcHRpb25hbCA9IHBhdGgubWF0Y2goT1BUSU9OQUxfUEFSQU1TKSB8fCBbXTtcbiAgdmFyIHJlZiA9IGdldFBhcmFtc01hdGNoKHBhdGgpO1xuICB2YXIgbmFtZWQgPSByZWYubmFtZWQ7XG4gIHZhciBzcGxhdCA9IHJlZi5zcGxhdDtcblxuICB2YXIgcGFyYW1zID0gbmFtZWQuY29uY2F0KHNwbGF0KTtcblxuICBhcmdzID0gYXJncyB8fCB7fTtcblxuICBpZiAoaXNBcnJheShhcmdzKSkge1xuICAgIGFyZ3MgPSBwYXJhbXNBcnJheTJPYmplY3QocGF0aCwgYXJncyk7XG4gIH1cblxuICBwYXJhbXMgPSBwYXJhbXMubWFwKGZ1bmN0aW9uIChwYXJhbSkge1xuICAgIHZhciBpc09wdGlvbmFsID0gZmFsc2U7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9wdGlvbmFsLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgcCA9IG9wdGlvbmFsW2ldO1xuICAgICAgaWYgKHAuaW5kZXhPZihwYXJhbSkgIT09IC0xKSB7XG4gICAgICAgIGlzT3B0aW9uYWwgPSB0cnVlO1xuICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiBwYXJhbSxcbiAgICAgIHZhbHVlOiBhcmdzW3BhcmFtLnNsaWNlKDEpXSB8fCAnJyxcbiAgICAgIG9wdGlvbmFsOiBpc09wdGlvbmFsLFxuICAgICAgcmVxdWlyZWQ6ICFpc09wdGlvbmFsXG4gICAgfVxuICB9KTtcblxuICByZXR1cm4ge1xuICAgIHBhcmFtczogcGFyYW1zLFxuICAgIGhhc09wdGlvbmFsUGFyYW1zOiBPUFRJT05BTF9QQVJBTVMudGVzdChwYXRoKSxcbiAgICBtaXNzaW5nT3B0aW9uYWxQYXJhbXM6IHRlc3RQYXJhbWV0ZXIocGFyYW1zLCAnb3B0aW9uYWwnKSxcbiAgICBtaXNzaW5nUmVxdWlyZWRQYXJhbXM6IHRlc3RQYXJhbWV0ZXIocGFyYW1zLCAncmVxdWlyZWQnKSxcbiAgICBtaXNzaW5nUGFyYW1zOiB0ZXN0UGFyYW1ldGVyKHBhcmFtcywgJ25hbWUnKVxuICB9XG59XG5cbi8qKlxuICogUGFyc2UgYSBnaXZlbiB1cmwgYHBhdGhgIGFjY29yZGluZyB0byBpdHMgYGRlZmluaXRpb25gIHRvIGV4dHJhY3QgdGhlIHBhcmFtZXRlcnNcbiAqXG4gKiBAcHVibGljXG4gKlxuICogQHRocm93cyB7RXJyb3J9IFRocm93cyBpZiBgb3B0aW9uc2Agb2JqZWN0IGlzIG1pc3NpbmcgYHBhdGhgIG9yIGBkZWZpbml0aW9uYFxuICpcbiAqIEBwYXJhbSAge29iamVjdH0gb3B0aW9ucyBPYmplY3QgY29udGFpbmluZyBhIGBwYXRoYCBhbmQgZHluYW1pYyBwYXRoIGBkZWZpbml0aW9uYC5cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICBDYW4gb3B0aW9ubmFseSB0YWtlIGBvYmplY3Q6IHRydWVgIHRvIGNvbnZlcnQgdGhlIHJlc3VsdCB0byBhbiBvYmplY3QsIGRlZmF1bHRzIHRvIGBmYWxzZWAuXG4gKiBAcmV0dXJuIHttaXhlZH0gICAgICAgICAgQXJyYXkgb2YgcGFyYW1ldGVyIHZhbHVlcyBleHRyYWN0ZWQgZnJvbSB0aGUgcGF0aCBvciBrZXkvdmFsdWUgcGFpciBvYmplY3QuXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgUmV0dXJuIGBudWxsYCBpZiB0aGUgYHBhdGhgIGRvZXMgbm90IG1hdGNoIHRoZSBgZGVmaW5pdGlvbmAuXG4gKi9cbmZ1bmN0aW9uIHBhcnNlIChvcHRpb25zKSB7XG4gIGlmICggb3B0aW9ucyA9PT0gdm9pZCAwICkgb3B0aW9ucyA9IHt9O1xuXG4gIHZhciBwYXRoID0gb3B0aW9ucy5wYXRoO1xuICB2YXIgZGVmaW5pdGlvbiA9IG9wdGlvbnMuZGVmaW5pdGlvbjtcbiAgdmFyIG9iamVjdCA9IG9wdGlvbnMub2JqZWN0O1xuXG4gIGlmICghcGF0aCAmJiAhZGVmaW5pdGlvbikge1xuICAgIHRocm93IG5ldyBFcnJvcigndXJsLWNvbXBvc2VyOiBNaXNzaW5nIHBhdGggYW5kIGRlZmluaXRpb24nKVxuICB9XG5cbiAgdmFyIHJlID0gcm91dGVUb1JlZ2V4KGRlZmluaXRpb24pO1xuXG4gIHZhciBwYXJhbXMgPSByZS5leGVjKHBhdGgpO1xuXG4gIGlmICghcGFyYW1zKSB7IHJldHVybiBudWxsIH1cblxuICBwYXJhbXMgPSBwYXJhbXMuc2xpY2UoMSk7XG5cbiAgdmFyIHJlc3VsdCA9IHBhcmFtcy5tYXAoZnVuY3Rpb24gKHBhcmFtLCBpKSB7XG4gICAgaWYgKGkgPT09IHBhcmFtcy5sZW5ndGggLSAxKSB7IHJldHVybiBwYXJhbSB8fCBudWxsIH1cbiAgICByZXR1cm4gcGFyYW0gPyBkZWNvZGVVUklDb21wb25lbnQocGFyYW0pIDogbnVsbFxuICB9KTtcblxuICBpZiAob2JqZWN0KSB7XG4gICAgdmFyIHF1ZXJ5ID0gcmVzdWx0LnBvcCgpO1xuICAgIHJlc3VsdCA9IHBhcmFtc0FycmF5Mk9iamVjdChkZWZpbml0aW9uLCByZXN1bHQpO1xuICAgIHJlc3VsdC5xdWVyeSA9IHF1ZXJ5O1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdFxufVxuXG52YXIgaW5kZXggPSB7XG4gIGJ1aWxkOiBidWlsZCxcbiAgdGVzdDogdGVzdCxcbiAgc3RhdHM6IHN0YXRzLFxuICBwYXJzZTogcGFyc2UsXG4gIHBhcmFtczogcGFyYW1zQXJyYXkyT2JqZWN0LFxuICBwYXRoOiBidWlsZFBhdGgsXG4gIHF1ZXJ5OiBidWlsZFF1ZXJ5LFxuICByZWdleDogcm91dGVUb1JlZ2V4LFxuICBtYXRjaDogZ2V0UGFyYW1zTWF0Y2hcbn07XG5cbnJldHVybiBpbmRleDtcblxufSkpKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL3VybC1jb21wb3Nlci9kaXN0L3VybC1jb21wb3Nlci5qc1xuLy8gbW9kdWxlIGlkID0gOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9